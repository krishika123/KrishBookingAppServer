2021-05-25 11:49:10.241 +00:00 [INF] Starting host...
2021-05-25 11:49:13.519 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-25 11:49:13.530 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-25 11:49:13.534 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-25 11:49:13.534 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-25 11:49:13.534 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-25 11:49:13.534 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-25 11:49:13.535 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-25 11:49:13.535 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-25 11:49:18.262 +00:00 [DBG] Login Url: /Account/Login
2021-05-25 11:49:18.264 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-05-25 11:49:18.265 +00:00 [DBG] Logout Url: /Account/Logout
2021-05-25 11:49:18.265 +00:00 [DBG] ConsentUrl Url: /consent
2021-05-25 11:49:18.265 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-05-25 11:49:18.266 +00:00 [DBG] Error Url: /home/error
2021-05-25 11:49:18.266 +00:00 [DBG] Error Id Parameter: errorId
2021-05-25 15:48:59.719 +00:00 [INF] Starting host...
2021-05-25 15:49:02.522 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-25 15:49:02.532 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-25 15:49:02.535 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-25 15:49:02.536 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-25 15:49:02.536 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-25 15:49:02.536 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-25 15:49:02.536 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-25 15:49:02.536 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-25 15:49:07.319 +00:00 [DBG] Login Url: /Account/Login
2021-05-25 15:49:07.322 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-05-25 15:49:07.323 +00:00 [DBG] Logout Url: /Account/Logout
2021-05-25 15:49:07.323 +00:00 [DBG] ConsentUrl Url: /consent
2021-05-25 15:49:07.324 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-05-25 15:49:07.324 +00:00 [DBG] Error Url: /home/error
2021-05-25 15:49:07.324 +00:00 [DBG] Error Id Parameter: errorId
2021-05-25 15:49:27.729 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-05-25 15:49:27.731 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-05-25 15:49:27.732 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-05-25 15:49:27.734 +00:00 [DBG] Start discovery request
2021-05-25 15:49:28.265 +00:00 [DBG] Found ["profile","openid","email","phone","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-05-25 16:17:04.296 +00:00 [INF] Starting host...
2021-05-25 16:17:05.877 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-25 16:17:05.888 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-25 16:17:05.891 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-25 16:17:05.891 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-25 16:17:05.892 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-25 16:17:05.892 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-25 16:17:05.892 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-25 16:17:05.893 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-25 16:17:36.468 +00:00 [DBG] Login Url: /Account/Login
2021-05-25 16:17:36.470 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-05-25 16:17:36.471 +00:00 [DBG] Logout Url: /Account/Logout
2021-05-25 16:17:36.471 +00:00 [DBG] ConsentUrl Url: /consent
2021-05-25 16:17:36.472 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-05-25 16:17:36.472 +00:00 [DBG] Error Url: /home/error
2021-05-25 16:17:36.472 +00:00 [DBG] Error Id Parameter: errorId
2021-05-25 16:17:36.564 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-05-25 16:17:36.567 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-05-25 16:17:36.567 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-05-25 16:17:36.575 +00:00 [DBG] Start discovery request
2021-05-25 16:17:37.219 +00:00 [DBG] Found ["profile","openid","email","phone","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-05-25 16:37:57.492 +00:00 [INF] Starting host...
2021-05-25 16:38:00.085 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-25 16:38:00.096 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-25 16:38:00.100 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-25 16:38:00.100 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-25 16:38:00.100 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-25 16:38:00.101 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-25 16:38:00.101 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-25 16:38:00.101 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-25 16:43:00.726 +00:00 [INF] Starting host...
2021-05-25 16:43:03.108 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-25 16:43:03.118 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-25 16:43:03.122 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-25 16:43:03.122 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-25 16:43:03.122 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-25 16:43:03.123 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-25 16:43:03.123 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-25 16:43:03.123 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-25 16:43:04.642 +00:00 [DBG] Login Url: /Account/Login
2021-05-25 16:43:04.643 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-05-25 16:43:04.645 +00:00 [DBG] Logout Url: /Account/Logout
2021-05-25 16:43:04.646 +00:00 [DBG] ConsentUrl Url: /consent
2021-05-25 16:43:04.646 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-05-25 16:43:04.646 +00:00 [DBG] Error Url: /home/error
2021-05-25 16:43:04.647 +00:00 [DBG] Error Id Parameter: errorId
2021-05-25 16:43:15.079 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-05-25 16:43:15.082 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-05-25 16:43:15.082 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-05-25 16:43:15.084 +00:00 [DBG] Start discovery request
2021-05-25 16:43:15.713 +00:00 [DBG] Found ["profile","openid","email","phone","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-05-25 17:05:33.131 +00:00 [INF] Starting host...
2021-05-25 17:05:35.562 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-25 17:05:35.574 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-25 17:05:35.577 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-25 17:05:35.577 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-25 17:05:35.578 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-25 17:05:35.578 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-25 17:05:35.578 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-25 17:05:35.578 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-25 17:05:36.934 +00:00 [DBG] Login Url: /Account/Login
2021-05-25 17:05:36.936 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-05-25 17:05:36.937 +00:00 [DBG] Logout Url: /Account/Logout
2021-05-25 17:05:36.937 +00:00 [DBG] ConsentUrl Url: /consent
2021-05-25 17:05:36.938 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-05-25 17:05:36.938 +00:00 [DBG] Error Url: /home/error
2021-05-25 17:05:36.939 +00:00 [DBG] Error Id Parameter: errorId
2021-05-26 09:32:53.036 +00:00 [INF] Starting host...
2021-05-26 09:32:58.267 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-26 09:32:58.674 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-26 09:32:58.745 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-26 09:32:58.753 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-26 09:32:58.754 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-26 09:32:58.756 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-26 09:32:58.757 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-26 09:32:58.758 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-26 09:33:06.167 +00:00 [DBG] Login Url: /Account/Login
2021-05-26 09:33:06.174 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-05-26 09:33:06.177 +00:00 [DBG] Logout Url: /Account/Logout
2021-05-26 09:33:06.186 +00:00 [DBG] ConsentUrl Url: /consent
2021-05-26 09:33:06.186 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-05-26 09:33:06.187 +00:00 [DBG] Error Url: /home/error
2021-05-26 09:33:06.188 +00:00 [DBG] Error Id Parameter: errorId
2021-05-26 09:33:53.588 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-05-26 09:37:17.965 +00:00 [INF] Starting host...
2021-05-26 09:37:19.312 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-26 09:37:19.324 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-26 09:37:19.327 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-26 09:37:19.328 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-26 09:37:19.328 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-26 09:37:19.328 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-26 09:37:19.328 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-26 09:37:19.329 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-26 09:37:21.062 +00:00 [DBG] Login Url: /Account/Login
2021-05-26 09:37:21.065 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-05-26 09:37:21.068 +00:00 [DBG] Logout Url: /Account/Logout
2021-05-26 09:37:21.073 +00:00 [DBG] ConsentUrl Url: /consent
2021-05-26 09:37:21.079 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-05-26 09:37:21.080 +00:00 [DBG] Error Url: /home/error
2021-05-26 09:37:21.080 +00:00 [DBG] Error Id Parameter: errorId
2021-05-26 09:37:24.420 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-05-26 09:54:01.637 +00:00 [INF] Starting host...
2021-05-26 09:54:04.386 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-26 09:54:04.397 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-26 09:54:04.401 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-26 09:54:04.402 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-26 09:54:04.402 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-26 09:54:04.402 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-26 09:54:04.402 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-26 09:54:04.403 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-26 09:54:08.033 +00:00 [DBG] Login Url: /Account/Login
2021-05-26 09:54:08.035 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-05-26 09:54:08.038 +00:00 [DBG] Logout Url: /Account/Logout
2021-05-26 09:54:08.038 +00:00 [DBG] ConsentUrl Url: /consent
2021-05-26 09:54:08.038 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-05-26 09:54:08.039 +00:00 [DBG] Error Url: /home/error
2021-05-26 09:54:08.039 +00:00 [DBG] Error Id Parameter: errorId
2021-05-26 09:55:42.636 +00:00 [INF] Starting host...
2021-05-26 09:55:43.963 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-26 09:55:43.974 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-26 09:55:43.978 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-26 09:55:43.978 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-26 09:55:43.978 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-26 09:55:43.979 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-26 09:55:43.979 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-26 09:55:43.979 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-26 09:55:45.600 +00:00 [DBG] Login Url: /Account/Login
2021-05-26 09:55:45.603 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-05-26 09:55:45.604 +00:00 [DBG] Logout Url: /Account/Logout
2021-05-26 09:55:45.604 +00:00 [DBG] ConsentUrl Url: /consent
2021-05-26 09:55:45.605 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-05-26 09:55:45.605 +00:00 [DBG] Error Url: /home/error
2021-05-26 09:55:45.605 +00:00 [DBG] Error Id Parameter: errorId
2021-05-26 10:01:29.654 +00:00 [DBG] CORS request made for path: /api/Authentication/UserLogin from origin: chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-05-26 10:03:48.337 +00:00 [DBG] CORS request made for path: /api/Authentication/UserLogin from origin: chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-05-26 10:04:07.875 +00:00 [DBG] CORS request made for path: /api/Authentication/UserLogin from origin: chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-05-26 10:04:19.595 +00:00 [DBG] CORS request made for path: /api/Authentication/UserLogin from origin: chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-05-26 10:04:37.977 +00:00 [DBG] CORS request made for path: /api/Authentication/UserLogin from origin: chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-05-26 10:05:01.907 +00:00 [DBG] CORS request made for path: /api/Authentication/UserLogin from origin: chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-05-26 10:05:12.685 +00:00 [DBG] CORS request made for path: /api/Authentication/UserLogin from origin: chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-05-26 10:05:20.425 +00:00 [DBG] CORS request made for path: /api/Authentication/UserLogin from origin: chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-05-26 10:05:27.977 +00:00 [DBG] CORS request made for path: /api/Authentication/UserLogin from origin: chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-05-26 10:05:45.683 +00:00 [DBG] CORS request made for path: /api/Authentication/UserLogin from origin: chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-05-26 10:06:17.032 +00:00 [DBG] Augmenting SignInContext
2021-05-26 10:06:17.033 +00:00 [DBG] Adding idp claim with value: local
2021-05-26 10:06:17.034 +00:00 [DBG] Adding auth_time claim with value: 1622023577
2021-05-26 10:06:17.118 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-05-26 10:06:31.034 +00:00 [INF] {"Username":"GHA-020202020-1","Provider":null,"ProviderUserId":null,"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"GHA-020202020-1","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM905HMU8471:00000013","TimeStamp":"2021-05-26T10:06:30.0000000Z","ProcessId":5960,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-05-26 10:11:18.598 +00:00 [INF] Starting host...
2021-05-26 10:11:19.912 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-26 10:11:19.923 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-26 10:11:19.927 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-26 10:11:19.927 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-26 10:11:19.927 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-26 10:11:19.928 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-26 10:11:19.928 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-26 10:11:19.928 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-26 10:11:22.216 +00:00 [DBG] Login Url: /Account/Login
2021-05-26 10:11:22.222 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-05-26 10:11:22.228 +00:00 [DBG] Logout Url: /Account/Logout
2021-05-26 10:11:22.228 +00:00 [DBG] ConsentUrl Url: /consent
2021-05-26 10:11:22.228 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-05-26 10:11:22.229 +00:00 [DBG] Error Url: /home/error
2021-05-26 10:11:22.230 +00:00 [DBG] Error Id Parameter: errorId
2021-05-26 10:11:27.552 +00:00 [DBG] CORS request made for path: /api/Authentication/UserLogin from origin: chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-05-26 10:11:35.840 +00:00 [DBG] Augmenting SignInContext
2021-05-26 10:11:35.841 +00:00 [DBG] Adding idp claim with value: local
2021-05-26 10:11:35.841 +00:00 [DBG] Adding auth_time claim with value: 1622023895
2021-05-26 10:11:35.850 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-05-26 10:11:39.108 +00:00 [INF] {"Username":"GHA-020202020-1","Provider":null,"ProviderUserId":null,"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"GHA-020202020-1","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM905QDVUR4L:00000001","TimeStamp":"2021-05-26T10:11:39.0000000Z","ProcessId":45256,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-05-26 11:11:32.391 +00:00 [INF] Removing 0 grants
2021-05-26 11:11:32.540 +00:00 [INF] Removing 0 device flow codes
2021-05-26 12:15:58.892 +00:00 [INF] Starting host...
2021-05-26 12:16:13.233 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-26 12:16:13.243 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-26 12:16:13.247 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-26 12:16:13.247 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-26 12:16:13.248 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-26 12:16:13.248 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-26 12:16:13.248 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-26 12:16:13.248 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-26 12:16:17.437 +00:00 [DBG] Login Url: /Account/Login
2021-05-26 12:16:17.439 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-05-26 12:16:17.439 +00:00 [DBG] Logout Url: /Account/Logout
2021-05-26 12:16:17.440 +00:00 [DBG] ConsentUrl Url: /consent
2021-05-26 12:16:17.440 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-05-26 12:16:17.440 +00:00 [DBG] Error Url: /home/error
2021-05-26 12:16:17.440 +00:00 [DBG] Error Id Parameter: errorId
2021-05-26 12:16:37.652 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-05-26 12:16:51.185 +00:00 [DBG] Augmenting SignInContext
2021-05-26 12:16:51.186 +00:00 [DBG] Adding idp claim with value: local
2021-05-26 12:16:51.186 +00:00 [DBG] Adding auth_time claim with value: 1622031411
2021-05-26 12:16:51.193 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-05-26 12:16:51.231 +00:00 [INF] {"Username":"GHA-020202020-4","Provider":null,"ProviderUserId":null,"SubjectId":"0ba924ab-c642-454b-a4fe-8a2aa5bc70f4","DisplayName":"GHA-020202020-4","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM908078UETJ:00000017","TimeStamp":"2021-05-26T12:16:51.0000000Z","ProcessId":12712,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-05-26 12:16:51.390 +00:00 [DBG] 1 persisted grants found for 0ba924ab-c642-454b-a4fe-8a2aa5bc70f4
2021-05-26 12:16:51.996 +00:00 [DBG] api-swagger found in database: true
2021-05-26 12:16:52.005 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-05-26 12:16:52.075 +00:00 [DBG] Found [] identity scopes in database
2021-05-26 12:16:52.167 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-05-26 12:19:29.389 +00:00 [DBG] CORS request made for path: /api/Authentication/UserLogin from origin: chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-05-27 10:48:13.610 +00:00 [INF] Starting host...
2021-05-27 10:48:16.074 +00:00 [ERR] Failed executing DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Clients] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-05-27 10:48:16.315 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:1f911155-cb59-4bd2-b3de-935df9e945fa
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:1f911155-cb59-4bd2-b3de-935df9e945fa
Error Number:208,State:1,Class:16
2021-05-27 10:50:12.044 +00:00 [INF] Starting host...
2021-05-27 10:50:13.293 +00:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Clients] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-05-27 10:50:13.334 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:f535fe33-b8a9-4974-8c15-0b516a8d7acd
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:f535fe33-b8a9-4974-8c15-0b516a8d7acd
Error Number:208,State:1,Class:16
2021-05-27 10:51:56.617 +00:00 [INF] Starting host...
2021-05-27 10:52:13.513 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-27 10:52:13.520 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-27 10:52:13.524 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-27 10:52:13.524 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-27 10:52:13.525 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-27 10:52:13.525 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-27 10:52:13.525 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-27 10:52:13.525 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-27 10:52:17.470 +00:00 [DBG] Login Url: /Account/Login
2021-05-27 10:52:17.472 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-05-27 10:52:17.473 +00:00 [DBG] Logout Url: /Account/Logout
2021-05-27 10:52:17.476 +00:00 [DBG] ConsentUrl Url: /consent
2021-05-27 10:52:17.476 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-05-27 10:52:17.477 +00:00 [DBG] Error Url: /home/error
2021-05-27 10:52:17.477 +00:00 [DBG] Error Id Parameter: errorId
2021-05-27 10:52:17.693 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-05-27 10:52:17.697 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-05-27 10:52:17.698 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-05-27 10:52:17.702 +00:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2021-05-27 10:52:17.708 +00:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2021-05-27 10:52:25.107 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-05-27 11:54:58.466 +00:00 [INF] Starting host...
2021-05-27 11:55:01.172 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-05-27 11:55:01.183 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-05-27 11:55:01.187 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-05-27 11:55:01.187 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-05-27 11:55:01.187 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-05-27 11:55:01.187 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-05-27 11:55:01.188 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-05-27 11:55:01.188 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-05-27 11:55:07.514 +00:00 [DBG] Login Url: /Account/Login
2021-05-27 11:55:07.515 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-05-27 11:55:07.517 +00:00 [DBG] Logout Url: /Account/Logout
2021-05-27 11:55:07.517 +00:00 [DBG] ConsentUrl Url: /consent
2021-05-27 11:55:07.518 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-05-27 11:55:07.518 +00:00 [DBG] Error Url: /home/error
2021-05-27 11:55:07.518 +00:00 [DBG] Error Id Parameter: errorId
2021-05-27 11:55:20.593 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-05-27 11:55:25.943 +00:00 [INF] {"Username":"lpkodjo@gmail.com","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM910P1KT1GJ:00000007","TimeStamp":"2021-05-27T11:55:25.0000000Z","ProcessId":8740,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2021-05-27 11:55:41.827 +00:00 [INF] {"Username":"lpkodjo@gmail.com","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM910P1KT1GJ:00000009","TimeStamp":"2021-05-27T11:55:41.0000000Z","ProcessId":8740,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2021-05-27 11:56:04.823 +00:00 [DBG] Augmenting SignInContext
2021-05-27 11:56:04.824 +00:00 [DBG] Adding idp claim with value: local
2021-05-27 11:56:04.824 +00:00 [DBG] Adding auth_time claim with value: 1622116564
2021-05-27 11:56:04.858 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-05-27 11:56:04.866 +00:00 [INF] {"Username":"system","Provider":null,"ProviderUserId":null,"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"system","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM910P1KT1GJ:0000000B","TimeStamp":"2021-05-27T11:56:04.0000000Z","ProcessId":8740,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-05-27 11:56:05.099 +00:00 [DBG] 0 persisted grants found for 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 13:24:58.179 +00:00 [INF] Starting host...
2021-06-10 13:24:58.847 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-06-10 13:24:59.683 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-06-10 13:24:59.687 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-06-10 13:24:59.687 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-06-10 13:24:59.687 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-06-10 13:24:59.687 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-06-10 13:24:59.688 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-06-10 13:24:59.688 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-06-10 13:25:05.327 +00:00 [DBG] Login Url: /Account/Login
2021-06-10 13:25:05.337 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-06-10 13:25:05.351 +00:00 [DBG] Logout Url: /Account/Logout
2021-06-10 13:25:05.357 +00:00 [DBG] ConsentUrl Url: /consent
2021-06-10 13:25:05.367 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-06-10 13:25:05.377 +00:00 [DBG] Error Url: /home/error
2021-06-10 13:25:05.378 +00:00 [DBG] Error Id Parameter: errorId
2021-06-10 13:25:11.575 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-10 13:25:11.896 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-10 13:25:11.899 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-10 13:25:11.901 +00:00 [DBG] Start discovery request
2021-06-10 13:25:14.885 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-10 13:39:53.075 +00:00 [INF] Starting host...
2021-06-10 13:39:53.238 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-06-10 13:39:53.365 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-06-10 13:39:53.371 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-06-10 13:39:53.371 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-06-10 13:39:53.372 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-06-10 13:39:53.372 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-06-10 13:39:53.372 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-06-10 13:39:53.372 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-06-10 13:39:54.944 +00:00 [DBG] Login Url: /Account/Login
2021-06-10 13:39:54.950 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-06-10 13:39:54.957 +00:00 [DBG] Logout Url: /Account/Logout
2021-06-10 13:39:54.957 +00:00 [DBG] ConsentUrl Url: /consent
2021-06-10 13:39:54.958 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-06-10 13:39:54.959 +00:00 [DBG] Error Url: /home/error
2021-06-10 13:39:54.959 +00:00 [DBG] Error Id Parameter: errorId
2021-06-10 13:43:41.674 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-10 13:43:41.714 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-10 13:43:41.715 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-10 13:43:41.721 +00:00 [DBG] Start authorize request
2021-06-10 13:43:41.762 +00:00 [DBG] No user present in authorize request
2021-06-10 13:43:41.763 +00:00 [DBG] Start authorize request protocol validation
2021-06-10 13:43:43.214 +00:00 [DBG] api-swagger found in database: true
2021-06-10 13:43:43.223 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 13:43:43.306 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:43:43.381 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:43:43.417 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:43:43.421 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:43:43.425 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-10 13:43:43.438 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"anonymous","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"VGh1IEp1biAxMCAyMDIxIDEzOjQzOjQxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"VGh1IEp1biAxMCAyMDIxIDEzOjQzOjQxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-10 13:43:43.447 +00:00 [INF] Showing login: User is not authenticated
2021-06-10 13:43:43.636 +00:00 [DBG] Start authorize request protocol validation
2021-06-10 13:43:43.674 +00:00 [DBG] api-swagger found in database: true
2021-06-10 13:43:43.674 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 13:43:43.677 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:43:43.681 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:43:43.684 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:43:43.688 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:43:43.689 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-10 13:43:43.704 +00:00 [DBG] api-swagger found in database: true
2021-06-10 13:43:43.705 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 13:43:49.871 +00:00 [DBG] Start authorize request protocol validation
2021-06-10 13:43:49.900 +00:00 [DBG] api-swagger found in database: true
2021-06-10 13:43:49.900 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 13:43:49.903 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:43:49.905 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:43:49.911 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:43:49.913 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:43:49.913 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-10 13:43:50.094 +00:00 [WRN] Invalid password for user 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32.
2021-06-10 13:43:50.096 +00:00 [WRN] User 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32 failed to provide the correct password.
2021-06-10 13:43:50.291 +00:00 [INF] {"Username":"paul.kodjo@persol.net","Endpoint":"UI","ClientId":"api-swagger","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM9C2KTC2SU2:00000007","TimeStamp":"2021-06-10T13:43:50.0000000Z","ProcessId":31988,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2021-06-10 13:43:50.312 +00:00 [DBG] Start authorize request protocol validation
2021-06-10 13:43:50.328 +00:00 [DBG] api-swagger found in database: true
2021-06-10 13:43:50.328 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 13:43:50.331 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:43:50.333 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:43:50.335 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:43:50.337 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:43:50.338 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-10 13:43:50.351 +00:00 [DBG] api-swagger found in database: true
2021-06-10 13:43:50.351 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 13:44:14.066 +00:00 [DBG] Start authorize request protocol validation
2021-06-10 13:44:14.116 +00:00 [DBG] api-swagger found in database: true
2021-06-10 13:44:14.116 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 13:44:14.121 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:44:14.128 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:44:14.131 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:44:14.133 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:44:14.133 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-10 13:44:14.203 +00:00 [DBG] Augmenting SignInContext
2021-06-10 13:44:14.204 +00:00 [DBG] Adding idp claim with value: local
2021-06-10 13:44:14.204 +00:00 [DBG] Adding auth_time claim with value: 1623332654
2021-06-10 13:44:14.233 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-06-10 13:44:14.238 +00:00 [INF] {"Username":"GHA-020202020-1","Provider":null,"ProviderUserId":null,"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"GHA-020202020-1","Endpoint":"UI","ClientId":"api-swagger","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM9C2KTC2SU2:00000009","TimeStamp":"2021-06-10T13:44:14.0000000Z","ProcessId":31988,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-06-10 13:44:14.253 +00:00 [DBG] api-swagger found in database: true
2021-06-10 13:44:14.253 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 13:44:14.337 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-06-10 13:44:14.340 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-06-10 13:44:14.340 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-06-10 13:44:14.346 +00:00 [DBG] Start authorize callback request
2021-06-10 13:44:14.355 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 13:44:14.355 +00:00 [DBG] Start authorize request protocol validation
2021-06-10 13:44:14.374 +00:00 [DBG] api-swagger found in database: true
2021-06-10 13:44:14.374 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 13:44:14.378 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:44:14.381 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:44:14.382 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:44:14.384 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:44:14.385 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-10 13:44:14.386 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"VGh1IEp1biAxMCAyMDIxIDEzOjQzOjQxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"I5wabr__GTJFQ37YidpaZQ","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"VGh1IEp1biAxMCAyMDIxIDEzOjQzOjQxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-10 13:44:14.438 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-10 13:44:14.453 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-10 13:44:14.457 +00:00 [DBG] Creating Implicit Flow response.
2021-06-10 13:44:14.464 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-10 13:44:14.465 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 13:44:14.477 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-10 13:44:14.717 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****RWwQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9C2KTC2SU2:0000000B","TimeStamp":"2021-06-10T13:44:14.0000000Z","ProcessId":31988,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-10 13:44:14.722 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"VGh1IEp1biAxMCAyMDIxIDEzOjQzOjQxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-10 13:44:14.730 +00:00 [DBG] Augmenting SignInContext
2021-06-10 13:44:14.731 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-06-10 13:46:37.330 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-10 13:46:37.336 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-10 13:46:37.337 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-10 13:46:37.339 +00:00 [DBG] Start discovery request
2021-06-10 13:46:37.417 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-10 13:46:37.624 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-10 13:46:37.625 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-10 13:46:37.626 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-10 13:46:37.634 +00:00 [DBG] Start key discovery request
2021-06-10 13:51:17.781 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-10 13:51:17.784 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-10 13:51:17.785 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-10 13:51:17.785 +00:00 [DBG] Start authorize request
2021-06-10 13:51:17.786 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 13:51:17.787 +00:00 [DBG] Start authorize request protocol validation
2021-06-10 13:51:17.850 +00:00 [DBG] api-swagger found in database: true
2021-06-10 13:51:17.850 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 13:51:17.856 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:51:17.864 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:51:17.868 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:51:17.871 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:51:17.872 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-10 13:51:17.873 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"VGh1IEp1biAxMCAyMDIxIDEzOjUxOjE3IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"I5wabr__GTJFQ37YidpaZQ","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"VGh1IEp1biAxMCAyMDIxIDEzOjUxOjE3IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-10 13:51:17.888 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-10 13:51:17.889 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-10 13:51:17.889 +00:00 [DBG] Creating Implicit Flow response.
2021-06-10 13:51:17.889 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-10 13:51:17.890 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 13:51:17.899 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-10 13:51:17.902 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****pT_w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9C2KTC2SU2:0000000D","TimeStamp":"2021-06-10T13:51:17.0000000Z","ProcessId":31988,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-10 13:51:17.905 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"VGh1IEp1biAxMCAyMDIxIDEzOjUxOjE3IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-10 13:51:59.318 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-10 13:51:59.320 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-10 13:51:59.321 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-10 13:51:59.335 +00:00 [DBG] Start discovery request
2021-06-10 13:51:59.342 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-10 13:51:59.429 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-10 13:51:59.430 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-10 13:51:59.431 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-10 13:51:59.432 +00:00 [DBG] Start key discovery request
2021-06-10 13:57:59.477 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-10 13:57:59.482 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-10 13:57:59.482 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-10 13:57:59.483 +00:00 [DBG] Start authorize request
2021-06-10 13:57:59.484 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 13:57:59.484 +00:00 [DBG] Start authorize request protocol validation
2021-06-10 13:57:59.540 +00:00 [DBG] api-swagger found in database: true
2021-06-10 13:57:59.541 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 13:57:59.545 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:57:59.547 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:57:59.549 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 13:57:59.551 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 13:57:59.551 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-10 13:57:59.552 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"VGh1IEp1biAxMCAyMDIxIDEzOjU3OjU5IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"I5wabr__GTJFQ37YidpaZQ","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"VGh1IEp1biAxMCAyMDIxIDEzOjU3OjU5IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-10 13:57:59.566 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-10 13:57:59.566 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-10 13:57:59.567 +00:00 [DBG] Creating Implicit Flow response.
2021-06-10 13:57:59.567 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-10 13:57:59.567 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 13:57:59.576 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-10 13:57:59.579 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****OS_Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9C2KTC2SU2:0000000F","TimeStamp":"2021-06-10T13:57:59.0000000Z","ProcessId":31988,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-10 13:57:59.581 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"VGh1IEp1biAxMCAyMDIxIDEzOjU3OjU5IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-10 13:58:21.680 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-10 13:58:21.683 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-10 13:58:21.684 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-10 13:58:21.685 +00:00 [DBG] Start discovery request
2021-06-10 13:58:21.701 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-10 13:58:21.796 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-10 13:58:21.798 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-10 13:58:21.799 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-10 13:58:21.800 +00:00 [DBG] Start key discovery request
2021-06-10 14:09:36.201 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-10 14:09:36.205 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-10 14:09:36.205 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-10 14:09:36.206 +00:00 [DBG] Start authorize request
2021-06-10 14:09:36.206 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 14:09:36.207 +00:00 [DBG] Start authorize request protocol validation
2021-06-10 14:09:36.283 +00:00 [DBG] api-swagger found in database: true
2021-06-10 14:09:36.283 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 14:09:36.286 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 14:09:36.289 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 14:09:36.306 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 14:09:36.309 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 14:09:36.310 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-10 14:09:36.313 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"VGh1IEp1biAxMCAyMDIxIDE0OjA5OjM2IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"I5wabr__GTJFQ37YidpaZQ","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"VGh1IEp1biAxMCAyMDIxIDE0OjA5OjM2IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-10 14:09:36.323 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-10 14:09:36.324 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-10 14:09:36.325 +00:00 [DBG] Creating Implicit Flow response.
2021-06-10 14:09:36.325 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-10 14:09:36.326 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 14:09:36.336 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-10 14:09:36.338 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****2o4g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9C2KTC2SU2:00000011","TimeStamp":"2021-06-10T14:09:36.0000000Z","ProcessId":31988,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-10 14:09:36.341 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"VGh1IEp1biAxMCAyMDIxIDE0OjA5OjM2IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-10 14:10:10.009 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-10 14:10:10.013 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-10 14:10:10.014 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-10 14:10:10.014 +00:00 [DBG] Start discovery request
2021-06-10 14:10:10.025 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-10 14:10:10.116 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-10 14:10:10.118 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-10 14:10:10.118 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-10 14:10:10.119 +00:00 [DBG] Start key discovery request
2021-06-10 14:11:52.269 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-10 14:11:52.271 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-10 14:11:52.273 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-10 14:11:52.275 +00:00 [DBG] Start authorize request
2021-06-10 14:11:52.276 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 14:11:52.276 +00:00 [DBG] Start authorize request protocol validation
2021-06-10 14:11:52.304 +00:00 [DBG] api-swagger found in database: true
2021-06-10 14:11:52.305 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 14:11:52.312 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 14:11:52.314 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 14:11:52.316 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 14:11:52.318 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 14:11:52.319 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-10 14:11:52.319 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"VGh1IEp1biAxMCAyMDIxIDE0OjExOjUyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"I5wabr__GTJFQ37YidpaZQ","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"VGh1IEp1biAxMCAyMDIxIDE0OjExOjUyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-10 14:11:52.333 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-10 14:11:52.334 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-10 14:11:52.335 +00:00 [DBG] Creating Implicit Flow response.
2021-06-10 14:11:52.335 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-10 14:11:52.335 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 14:11:52.346 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-10 14:11:52.350 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****xVjw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9C2KTC2SU2:00000013","TimeStamp":"2021-06-10T14:11:52.0000000Z","ProcessId":31988,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-10 14:11:52.360 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"VGh1IEp1biAxMCAyMDIxIDE0OjExOjUyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-10 14:12:16.303 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-10 14:12:16.304 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-10 14:12:16.305 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-10 14:12:16.306 +00:00 [DBG] Start discovery request
2021-06-10 14:12:16.313 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-10 14:12:16.382 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-10 14:12:16.383 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-10 14:12:16.384 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-10 14:12:16.384 +00:00 [DBG] Start key discovery request
2021-06-10 14:13:58.255 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-10 14:13:58.257 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-10 14:13:58.257 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-10 14:13:58.263 +00:00 [DBG] Start authorize request
2021-06-10 14:13:58.264 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 14:13:58.265 +00:00 [DBG] Start authorize request protocol validation
2021-06-10 14:13:58.336 +00:00 [DBG] api-swagger found in database: true
2021-06-10 14:13:58.336 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 14:13:58.339 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 14:13:58.346 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 14:13:58.350 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 14:13:58.354 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 14:13:58.355 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-10 14:13:58.357 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"VGh1IEp1biAxMCAyMDIxIDE0OjEzOjU4IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"I5wabr__GTJFQ37YidpaZQ","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"VGh1IEp1biAxMCAyMDIxIDE0OjEzOjU4IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-10 14:13:58.374 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-10 14:13:58.377 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-10 14:13:58.381 +00:00 [DBG] Creating Implicit Flow response.
2021-06-10 14:13:58.384 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-10 14:13:58.384 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 14:13:58.389 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-10 14:13:58.391 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****LoYA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9C2KTC2SU2:00000015","TimeStamp":"2021-06-10T14:13:58.0000000Z","ProcessId":31988,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-10 14:13:58.400 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"VGh1IEp1biAxMCAyMDIxIDE0OjEzOjU4IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-10 14:14:09.917 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-10 14:14:09.921 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-10 14:14:09.922 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-10 14:14:09.922 +00:00 [DBG] Start discovery request
2021-06-10 14:14:09.932 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-10 14:14:10.004 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-10 14:14:10.005 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-10 14:14:10.006 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-10 14:14:10.006 +00:00 [DBG] Start key discovery request
2021-06-10 14:38:22.813 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-10 14:38:22.814 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-10 14:38:22.816 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-10 14:38:22.817 +00:00 [DBG] Start authorize request
2021-06-10 14:38:22.818 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 14:38:22.818 +00:00 [DBG] Start authorize request protocol validation
2021-06-10 14:38:22.836 +00:00 [DBG] api-swagger found in database: true
2021-06-10 14:38:22.836 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 14:38:22.839 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 14:38:22.841 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 14:38:22.847 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 14:38:22.867 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 14:38:22.868 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-10 14:38:22.869 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"VGh1IEp1biAxMCAyMDIxIDE0OjM4OjIyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"I5wabr__GTJFQ37YidpaZQ","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"VGh1IEp1biAxMCAyMDIxIDE0OjM4OjIyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-10 14:38:22.874 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-10 14:38:22.876 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-10 14:38:22.881 +00:00 [DBG] Creating Implicit Flow response.
2021-06-10 14:38:22.881 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-10 14:38:22.882 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 14:38:22.886 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-10 14:38:22.888 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****gugw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9C2KTC2SU2:00000017","TimeStamp":"2021-06-10T14:38:22.0000000Z","ProcessId":31988,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-10 14:38:22.892 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"VGh1IEp1biAxMCAyMDIxIDE0OjM4OjIyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-10 14:38:32.141 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-10 14:38:32.147 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-10 14:38:32.157 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-10 14:38:32.158 +00:00 [DBG] Start discovery request
2021-06-10 14:38:32.165 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-10 14:38:32.234 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-10 14:38:32.236 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-10 14:38:32.239 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-10 14:38:32.240 +00:00 [DBG] Start key discovery request
2021-06-10 14:39:53.263 +00:00 [INF] Removing 0 grants
2021-06-10 14:39:53.275 +00:00 [INF] Removing 0 device flow codes
2021-06-10 14:41:53.469 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-10 14:41:53.471 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-10 14:41:53.472 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-10 14:41:53.473 +00:00 [DBG] Start authorize request
2021-06-10 14:41:53.473 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 14:41:53.474 +00:00 [DBG] Start authorize request protocol validation
2021-06-10 14:41:53.560 +00:00 [DBG] api-swagger found in database: true
2021-06-10 14:41:53.561 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-10 14:41:53.566 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 14:41:53.569 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 14:41:53.575 +00:00 [DBG] Found [] identity scopes in database
2021-06-10 14:41:53.577 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-10 14:41:53.578 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-10 14:41:53.579 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"VGh1IEp1biAxMCAyMDIxIDE0OjQxOjUzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"I5wabr__GTJFQ37YidpaZQ","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"VGh1IEp1biAxMCAyMDIxIDE0OjQxOjUzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-10 14:41:53.591 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-10 14:41:53.593 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-10 14:41:53.593 +00:00 [DBG] Creating Implicit Flow response.
2021-06-10 14:41:53.594 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-10 14:41:53.594 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-10 14:41:53.599 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-10 14:41:53.601 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****_XCQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9C2KTC2SU2:00000019","TimeStamp":"2021-06-10T14:41:53.0000000Z","ProcessId":31988,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-10 14:41:53.609 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"VGh1IEp1biAxMCAyMDIxIDE0OjQxOjUzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-10 14:41:58.520 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-10 14:41:58.522 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-10 14:41:58.525 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-10 14:41:58.526 +00:00 [DBG] Start discovery request
2021-06-10 14:41:58.535 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-10 14:41:58.607 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-10 14:41:58.611 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-10 14:41:58.612 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-10 14:41:58.613 +00:00 [DBG] Start key discovery request
2021-06-10 15:39:53.396 +00:00 [INF] Removing 0 grants
2021-06-10 15:39:53.402 +00:00 [INF] Removing 0 device flow codes
2021-06-10 16:39:54.741 +00:00 [INF] Removing 0 grants
2021-06-10 16:39:54.744 +00:00 [INF] Removing 0 device flow codes
2021-06-10 17:39:55.972 +00:00 [INF] Removing 0 grants
2021-06-10 17:39:55.974 +00:00 [INF] Removing 0 device flow codes
2021-06-12 18:23:28.990 +00:00 [INF] Starting host...
2021-06-12 18:23:29.544 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-06-12 18:23:30.395 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-06-12 18:23:30.415 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-06-12 18:23:30.416 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-06-12 18:23:30.417 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-06-12 18:23:30.418 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-06-12 18:23:30.419 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-06-12 18:23:30.420 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-06-12 18:23:38.409 +00:00 [DBG] Login Url: /Account/Login
2021-06-12 18:23:38.413 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-06-12 18:23:38.416 +00:00 [DBG] Logout Url: /Account/Logout
2021-06-12 18:23:38.420 +00:00 [DBG] ConsentUrl Url: /consent
2021-06-12 18:23:38.422 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-06-12 18:23:38.423 +00:00 [DBG] Error Url: /home/error
2021-06-12 18:23:38.424 +00:00 [DBG] Error Id Parameter: errorId
2021-06-12 18:55:57.420 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-12 18:55:57.556 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-12 18:55:57.560 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-12 18:55:57.570 +00:00 [DBG] Start authorize request
2021-06-12 18:55:57.602 +00:00 [DBG] No user present in authorize request
2021-06-12 18:55:57.612 +00:00 [DBG] Start authorize request protocol validation
2021-06-12 18:56:18.677 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-12 18:56:19.005 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-12 18:56:19.262 +00:00 [INF] {"Details":"Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId)\r\n   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId)\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId)\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.LoadClientAsync(ValidatedAuthorizeRequest request)\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)\r\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)\r\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)\r\nClientConnectionId:00000000-0000-0000-0000-000000000000\r\nError Number:-1,State:0,Class:20","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)","ActivityId":"0HM9DPSO9ISFJ:0000000F","TimeStamp":"2021-06-12T18:56:19.0000000Z","ProcessId":46808,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"UnhandledExceptionEvent"}
2021-06-12 18:56:19.305 +00:00 [FTL] Unhandled exception: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId)
   at IdentityServer4.Validation.AuthorizeRequestValidator.LoadClientAsync(ValidatedAuthorizeRequest request)
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-12 18:56:19.493 +00:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at Microsoft.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-12 18:56:19.510 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId)
   at IdentityServer4.Validation.AuthorizeRequestValidator.LoadClientAsync(ValidatedAuthorizeRequest request)
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-12 18:57:20.618 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-12 18:57:20.635 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-12 18:57:20.638 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-12 18:57:20.640 +00:00 [DBG] Start authorize request
2021-06-12 18:57:20.644 +00:00 [DBG] No user present in authorize request
2021-06-12 18:57:20.645 +00:00 [DBG] Start authorize request protocol validation
2021-06-12 18:57:35.435 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-12 18:57:35.457 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-12 18:57:35.655 +00:00 [INF] {"Details":"Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId)\r\n   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId)\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId)\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.LoadClientAsync(ValidatedAuthorizeRequest request)\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)\r\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)\r\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)\r\nClientConnectionId:00000000-0000-0000-0000-000000000000\r\nError Number:-1,State:0,Class:20","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)","ActivityId":"0HM9DPSO9ISFJ:00000011","TimeStamp":"2021-06-12T18:57:35.0000000Z","ProcessId":46808,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"UnhandledExceptionEvent"}
2021-06-12 18:57:35.752 +00:00 [FTL] Unhandled exception: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId)
   at IdentityServer4.Validation.AuthorizeRequestValidator.LoadClientAsync(ValidatedAuthorizeRequest request)
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-12 18:57:35.895 +00:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at Microsoft.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-12 18:57:35.957 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId)
   at IdentityServer4.Validation.AuthorizeRequestValidator.LoadClientAsync(ValidatedAuthorizeRequest request)
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-12 18:58:49.050 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-12 18:58:49.185 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-12 18:58:49.189 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-12 18:58:49.194 +00:00 [DBG] Start authorize request
2021-06-12 18:58:49.198 +00:00 [DBG] No user present in authorize request
2021-06-12 18:58:49.198 +00:00 [DBG] Start authorize request protocol validation
2021-06-12 18:59:01.437 +00:00 [DBG] api-swagger found in database: true
2021-06-12 18:59:01.522 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-12 18:59:02.795 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 18:59:03.886 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 18:59:04.274 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 18:59:04.999 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 18:59:05.065 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-12 18:59:05.128 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"anonymous","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U2F0IEp1biAxMiAyMDIxIDE4OjU4OjQ4IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U2F0IEp1biAxMiAyMDIxIDE4OjU4OjQ4IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-12 18:59:05.212 +00:00 [INF] Showing login: User is not authenticated
2021-06-12 18:59:05.624 +00:00 [DBG] Start authorize request protocol validation
2021-06-12 18:59:39.389 +00:00 [DBG] api-swagger found in database: true
2021-06-12 18:59:39.392 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-12 18:59:40.319 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 18:59:44.291 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 18:59:45.544 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 18:59:47.156 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 18:59:47.165 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-12 18:59:57.577 +00:00 [DBG] api-swagger found in database: true
2021-06-12 18:59:57.580 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-12 19:00:16.112 +00:00 [DBG] Start authorize request protocol validation
2021-06-12 19:00:34.598 +00:00 [DBG] api-swagger found in database: true
2021-06-12 19:00:34.600 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-12 19:00:35.207 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 19:00:37.571 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 19:00:39.556 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 19:00:40.894 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 19:00:40.905 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-12 19:00:46.905 +00:00 [WRN] Invalid password for user 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32.
2021-06-12 19:00:46.912 +00:00 [WRN] User 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32 failed to provide the correct password.
2021-06-12 19:00:50.179 +00:00 [INF] {"Username":"paul.kodjo@persol.net","Endpoint":"UI","ClientId":"api-swagger","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM9DPSO9ISFJ:00000027","TimeStamp":"2021-06-12T19:00:50.0000000Z","ProcessId":46808,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"UserLoginFailureEvent"}
2021-06-12 19:00:50.200 +00:00 [DBG] Start authorize request protocol validation
2021-06-12 19:00:55.458 +00:00 [DBG] api-swagger found in database: true
2021-06-12 19:00:55.460 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-12 19:00:55.890 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 19:00:56.302 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 19:00:56.914 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 19:00:57.433 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 19:00:57.441 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-12 19:01:02.956 +00:00 [DBG] api-swagger found in database: true
2021-06-12 19:01:02.958 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-12 19:01:30.158 +00:00 [DBG] Start authorize request protocol validation
2021-06-12 19:01:45.699 +00:00 [DBG] api-swagger found in database: true
2021-06-12 19:01:45.701 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-12 19:01:46.044 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 19:01:46.478 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 19:01:47.454 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 19:01:49.036 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 19:01:49.047 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-12 19:01:55.212 +00:00 [DBG] Augmenting SignInContext
2021-06-12 19:01:55.220 +00:00 [DBG] Adding idp claim with value: local
2021-06-12 19:01:55.224 +00:00 [DBG] Adding auth_time claim with value: 1623524515
2021-06-12 19:01:55.286 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-06-12 19:01:55.678 +00:00 [INF] {"Username":"GHA-020202020-1","Provider":null,"ProviderUserId":null,"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"GHA-020202020-1","Endpoint":"UI","ClientId":"api-swagger","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM9DPSO9ISFJ:00000029","TimeStamp":"2021-06-12T19:01:55.0000000Z","ProcessId":46808,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2021-06-12 19:02:01.428 +00:00 [DBG] api-swagger found in database: true
2021-06-12 19:02:01.431 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-12 19:02:01.567 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-06-12 19:02:01.579 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-06-12 19:02:01.583 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-06-12 19:02:01.604 +00:00 [DBG] Start authorize callback request
2021-06-12 19:02:01.622 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-12 19:02:01.629 +00:00 [DBG] Start authorize request protocol validation
2021-06-12 19:02:07.026 +00:00 [DBG] api-swagger found in database: true
2021-06-12 19:02:07.028 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-12 19:02:07.624 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 19:02:08.177 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 19:02:10.644 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 19:02:13.045 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 19:02:13.059 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-12 19:02:13.065 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U2F0IEp1biAxMiAyMDIxIDE4OjU4OjQ4IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U2F0IEp1biAxMiAyMDIxIDE4OjU4OjQ4IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-12 19:02:14.797 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-12 19:02:14.940 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-12 19:02:14.977 +00:00 [DBG] Creating Implicit Flow response.
2021-06-12 19:02:15.051 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-12 19:02:15.054 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-12 19:02:15.983 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-12 19:02:16.668 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****KBEQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9DPSO9ISFJ:0000002B","TimeStamp":"2021-06-12T19:02:16.0000000Z","ProcessId":46808,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-12 19:02:16.722 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U2F0IEp1biAxMiAyMDIxIDE4OjU4OjQ4IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-12 19:02:16.797 +00:00 [DBG] Augmenting SignInContext
2021-06-12 19:02:16.802 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-06-12 19:02:47.531 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-12 19:02:47.548 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-12 19:02:47.550 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-12 19:02:47.563 +00:00 [DBG] Start discovery request
2021-06-12 19:02:55.335 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-12 19:02:56.293 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-12 19:02:56.312 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-12 19:02:56.315 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-12 19:02:56.328 +00:00 [DBG] Start key discovery request
2021-06-12 19:23:31.595 +00:00 [INF] Removing 0 grants
2021-06-12 19:23:32.572 +00:00 [INF] Removing 0 device flow codes
2021-06-12 20:23:47.740 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-12 20:23:47.762 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=13708; handshake=1353; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b85f268e-f355-4768-b06e-819ed26b605a
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=13708; handshake=1353; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b85f268e-f355-4768-b06e-819ed26b605a
Error Number:-2,State:0,Class:11
2021-06-12 20:23:47.995 +00:00 [ERR] Exception removing expired grants: Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=13708; handshake=1353; 
2021-06-12 22:47:56.534 +00:00 [INF] Starting host...
2021-06-12 22:47:56.961 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-06-12 22:47:57.454 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-06-12 22:47:57.468 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-06-12 22:47:57.469 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-06-12 22:47:57.470 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-06-12 22:47:57.470 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-06-12 22:47:57.471 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-06-12 22:47:57.471 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-06-12 22:48:01.700 +00:00 [DBG] Login Url: /Account/Login
2021-06-12 22:48:01.704 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-06-12 22:48:01.707 +00:00 [DBG] Logout Url: /Account/Logout
2021-06-12 22:48:01.708 +00:00 [DBG] ConsentUrl Url: /consent
2021-06-12 22:48:01.717 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-06-12 22:48:01.726 +00:00 [DBG] Error Url: /home/error
2021-06-12 22:48:01.728 +00:00 [DBG] Error Id Parameter: errorId
2021-06-12 22:56:02.858 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-12 22:56:02.888 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-12 22:56:02.892 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-12 22:56:02.914 +00:00 [DBG] Start authorize request
2021-06-12 22:56:02.952 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-12 22:56:02.970 +00:00 [DBG] Start authorize request protocol validation
2021-06-12 22:56:17.129 +00:00 [DBG] api-swagger found in database: true
2021-06-12 22:56:17.186 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-12 22:56:18.180 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 22:56:19.114 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 22:56:19.898 +00:00 [DBG] Found [] identity scopes in database
2021-06-12 22:56:20.680 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-12 22:56:20.718 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-12 22:56:20.787 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U2F0IEp1biAxMiAyMDIxIDIyOjU2OjAyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U2F0IEp1biAxMiAyMDIxIDIyOjU2OjAyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-12 22:56:22.038 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-12 22:56:22.164 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-12 22:56:22.215 +00:00 [DBG] Creating Implicit Flow response.
2021-06-12 22:56:22.283 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-12 22:56:22.286 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-12 22:56:22.949 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-12 22:56:23.569 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****i62g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9DUGGBE0L8:0000000F","TimeStamp":"2021-06-12T22:56:23.0000000Z","ProcessId":47068,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-12 22:56:23.599 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U2F0IEp1biAxMiAyMDIxIDIyOjU2OjAyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-12 22:56:38.154 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-12 22:56:38.197 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-12 22:56:38.208 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-12 22:56:38.235 +00:00 [DBG] Start discovery request
2021-06-12 22:56:42.372 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-12 22:56:43.261 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-12 22:56:43.288 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-12 22:56:43.293 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-12 22:56:43.311 +00:00 [DBG] Start key discovery request
2021-06-13 05:24:35.168 +00:00 [INF] Removing 0 grants
2021-06-13 05:24:35.320 +00:00 [INF] Removing 0 device flow codes
2021-06-13 05:42:22.135 +00:00 [INF] Starting host...
2021-06-13 05:42:22.353 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-06-13 05:42:22.530 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-06-13 05:42:22.537 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-06-13 05:42:22.538 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-06-13 05:42:22.538 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-06-13 05:42:22.538 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-06-13 05:42:22.539 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-06-13 05:42:22.539 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-06-13 05:42:24.592 +00:00 [DBG] Login Url: /Account/Login
2021-06-13 05:42:24.597 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-06-13 05:42:24.600 +00:00 [DBG] Logout Url: /Account/Logout
2021-06-13 05:42:24.603 +00:00 [DBG] ConsentUrl Url: /consent
2021-06-13 05:42:24.606 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-06-13 05:42:24.607 +00:00 [DBG] Error Url: /home/error
2021-06-13 05:42:24.607 +00:00 [DBG] Error Id Parameter: errorId
2021-06-13 05:53:17.393 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 05:53:17.399 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 05:53:17.400 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 05:53:17.404 +00:00 [DBG] Start authorize request
2021-06-13 05:53:17.410 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 05:53:17.413 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 05:53:24.570 +00:00 [DBG] api-swagger found in database: true
2021-06-13 05:53:24.580 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 05:53:24.886 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 05:53:25.320 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 05:53:25.699 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 05:53:26.739 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 05:53:26.746 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 05:53:26.759 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDA1OjUzOjE3IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDA1OjUzOjE3IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 05:53:27.803 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 05:53:27.833 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 05:53:27.837 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 05:53:27.849 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 05:53:27.849 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 05:53:28.580 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 05:53:28.703 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****ECIA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9E5O2C7BTF:0000000F","TimeStamp":"2021-06-13T05:53:28.0000000Z","ProcessId":24500,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 05:53:28.717 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDA1OjUzOjE3IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 05:53:46.478 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 05:53:46.481 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 05:53:46.484 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 05:53:46.486 +00:00 [DBG] Start discovery request
2021-06-13 05:53:47.169 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 05:53:47.324 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 05:53:47.328 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 05:53:47.329 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 05:53:47.334 +00:00 [DBG] Start key discovery request
2021-06-13 05:55:56.132 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 05:55:56.136 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 05:55:56.139 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 05:55:56.140 +00:00 [DBG] Start authorize request
2021-06-13 05:55:56.141 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 05:55:56.141 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 05:56:00.282 +00:00 [DBG] api-swagger found in database: true
2021-06-13 05:56:00.283 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 05:56:00.740 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 05:56:01.090 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 05:56:01.456 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 05:56:01.859 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 05:56:01.867 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 05:56:01.873 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDA1OjU1OjU2IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDA1OjU1OjU2IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 05:56:02.657 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 05:56:02.659 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 05:56:02.664 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 05:56:02.665 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 05:56:02.665 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 05:56:03.267 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 05:56:03.270 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****d_PQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9E5O2C7BTF:00000011","TimeStamp":"2021-06-13T05:56:03.0000000Z","ProcessId":24500,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 05:56:03.275 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDA1OjU1OjU2IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 05:56:48.663 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 05:56:48.666 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 05:56:48.669 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 05:56:48.670 +00:00 [DBG] Start discovery request
2021-06-13 05:56:49.552 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 05:56:49.642 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 05:56:49.650 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 05:56:49.651 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 05:56:49.651 +00:00 [DBG] Start key discovery request
2021-06-13 06:00:03.533 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 06:00:03.540 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 06:00:03.540 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 06:00:03.541 +00:00 [DBG] Start authorize request
2021-06-13 06:00:03.543 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 06:00:03.543 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 06:00:08.372 +00:00 [DBG] api-swagger found in database: true
2021-06-13 06:00:08.373 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 06:00:08.741 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 06:00:09.818 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 06:00:10.168 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 06:00:10.450 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 06:00:10.451 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 06:00:10.456 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDA2OjAwOjAzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDA2OjAwOjAzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 06:00:11.324 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 06:00:11.326 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 06:00:11.330 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 06:00:11.331 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 06:00:11.332 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 06:00:12.043 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 06:00:12.058 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****uegA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9E5O2C7BTI:0000000F","TimeStamp":"2021-06-13T06:00:12.0000000Z","ProcessId":24500,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 06:00:12.066 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDA2OjAwOjAzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 06:00:28.641 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 06:00:28.644 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 06:00:28.646 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 06:00:28.648 +00:00 [DBG] Start discovery request
2021-06-13 06:00:29.298 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 06:00:29.390 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 06:00:29.392 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 06:00:29.396 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 06:00:29.397 +00:00 [DBG] Start key discovery request
2021-06-13 06:03:41.532 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 06:03:41.537 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 06:03:41.541 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 06:03:41.544 +00:00 [DBG] Start authorize request
2021-06-13 06:03:41.545 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 06:03:41.545 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 06:03:45.694 +00:00 [DBG] api-swagger found in database: true
2021-06-13 06:03:45.695 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 06:03:46.015 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 06:03:46.336 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 06:03:46.495 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 06:03:46.949 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 06:03:46.952 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 06:03:46.956 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDA2OjAzOjQxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDA2OjAzOjQxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 06:03:47.602 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 06:03:47.613 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 06:03:47.617 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 06:03:47.620 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 06:03:47.631 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 06:03:48.274 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 06:03:48.278 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****s0Rw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9E5O2C7BTK:0000000F","TimeStamp":"2021-06-13T06:03:48.0000000Z","ProcessId":24500,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 06:03:48.283 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDA2OjAzOjQxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 06:04:25.049 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 06:04:25.053 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 06:04:25.057 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 06:04:25.058 +00:00 [DBG] Start discovery request
2021-06-13 06:04:26.022 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 06:04:26.109 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 06:04:26.110 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 06:04:26.111 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 06:04:26.116 +00:00 [DBG] Start key discovery request
2021-06-13 07:09:51.271 +00:00 [INF] Removing 0 grants
2021-06-13 07:09:51.826 +00:00 [INF] Removing 0 device flow codes
2021-06-13 07:27:01.056 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 07:27:01.073 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 07:27:01.088 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 07:27:01.104 +00:00 [DBG] Start authorize request
2021-06-13 07:27:01.108 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 07:27:01.122 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 07:27:05.869 +00:00 [DBG] api-swagger found in database: true
2021-06-13 07:27:05.871 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 07:27:06.732 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 07:27:07.602 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 07:27:07.856 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 07:27:08.267 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 07:27:08.285 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 07:27:08.292 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDA3OjI2OjU2IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDA3OjI2OjU2IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 07:27:08.615 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 07:27:08.625 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 07:27:08.631 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 07:27:08.638 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 07:27:08.640 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 07:27:09.908 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 07:27:09.933 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****PLuQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9E5O2C7BTM:0000000F","TimeStamp":"2021-06-13T07:27:09.0000000Z","ProcessId":24500,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 07:27:09.957 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDA3OjI2OjU2IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 07:27:40.263 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 07:27:40.272 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 07:27:40.280 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 07:27:40.285 +00:00 [DBG] Start discovery request
2021-06-13 07:27:41.795 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 07:27:42.312 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 07:27:42.326 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 07:27:42.339 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 07:27:42.370 +00:00 [DBG] Start key discovery request
2021-06-13 07:32:24.246 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 07:32:24.264 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 07:32:24.283 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 07:32:24.289 +00:00 [DBG] Start authorize request
2021-06-13 07:32:24.292 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 07:32:24.296 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 07:32:30.551 +00:00 [DBG] api-swagger found in database: true
2021-06-13 07:32:30.553 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 07:32:31.030 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 07:32:31.420 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 07:32:31.747 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 07:32:32.360 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 07:32:32.366 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 07:32:32.375 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDA3OjMyOjIzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDA3OjMyOjIzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 07:32:34.451 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 07:32:34.461 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 07:32:34.470 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 07:32:34.476 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 07:32:34.478 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 07:32:35.980 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 07:32:35.997 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****khsg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9E5O2C7BTO:0000000F","TimeStamp":"2021-06-13T07:32:35.0000000Z","ProcessId":24500,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 07:32:36.022 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDA3OjMyOjIzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 07:33:15.247 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 07:33:15.257 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 07:33:15.262 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 07:33:15.269 +00:00 [DBG] Start discovery request
2021-06-13 07:33:16.293 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 07:33:16.829 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 07:33:16.835 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 07:33:16.841 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 07:33:16.845 +00:00 [DBG] Start key discovery request
2021-06-13 08:09:56.249 +00:00 [INF] Removing 0 grants
2021-06-13 08:09:59.832 +00:00 [INF] Removing 0 device flow codes
2021-06-13 11:16:05.722 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-13 11:16:05.980 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'EBookkeepingAuth.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=19170; handshake=11; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:795310bb-f85f-4869-bbe3-f506253cda74
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=19170; handshake=11; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:795310bb-f85f-4869-bbe3-f506253cda74
Error Number:-2,State:0,Class:11
2021-06-13 11:17:06.946 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=19170; handshake=11; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.SignInManager`1.ValidateSecurityStampAsync(ClaimsPrincipal principal)
   at Microsoft.AspNetCore.Identity.SecurityStampValidator`1.ValidateAsync(CookieValidatePrincipalContext context)
   at Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:795310bb-f85f-4869-bbe3-f506253cda74
Error Number:-2,State:0,Class:11
2021-06-13 11:17:07.631 +00:00 [INF] Removing 0 grants
2021-06-13 11:17:08.951 +00:00 [INF] Removing 0 device flow codes
2021-06-13 11:17:27.170 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 11:17:27.175 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 11:17:27.176 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 11:17:27.178 +00:00 [DBG] Start authorize request
2021-06-13 11:17:27.180 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 11:17:27.180 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 11:17:33.447 +00:00 [DBG] api-swagger found in database: true
2021-06-13 11:17:33.448 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 11:17:33.931 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 11:17:34.448 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 11:17:35.738 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 11:17:37.202 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 11:17:37.206 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 11:17:37.212 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDExOjE3OjIyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDExOjE3OjIyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 11:17:39.148 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 11:17:39.152 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 11:17:39.155 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 11:17:39.156 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 11:17:39.157 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 11:17:45.013 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 11:17:45.027 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****TibA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9E5O2C7BTQ:00000013","TimeStamp":"2021-06-13T11:17:45.0000000Z","ProcessId":24500,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 11:17:45.041 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDExOjE3OjIyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 11:39:12.789 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 11:39:12.792 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 11:39:12.792 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 11:39:12.793 +00:00 [DBG] Start discovery request
2021-06-13 11:39:15.028 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 11:39:15.128 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 11:39:15.129 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 11:39:15.130 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 11:39:15.130 +00:00 [DBG] Start key discovery request
2021-06-13 11:56:17.794 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 11:56:17.799 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 11:56:17.806 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 11:56:17.833 +00:00 [DBG] Start authorize request
2021-06-13 11:56:17.883 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 11:56:17.891 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 11:56:22.460 +00:00 [DBG] api-swagger found in database: true
2021-06-13 11:56:22.463 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 11:56:23.004 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 11:56:24.303 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 11:56:25.573 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 11:56:26.336 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 11:56:26.339 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 11:56:26.345 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDExOjU2OjEzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDExOjU2OjEzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 11:56:27.245 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 11:56:27.250 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 11:56:27.255 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 11:56:27.256 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 11:56:27.261 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 11:56:29.239 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 11:56:29.268 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****iXIw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9E5O2C7BTS:0000000F","TimeStamp":"2021-06-13T11:56:29.0000000Z","ProcessId":24500,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 11:56:29.328 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDExOjU2OjEzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 11:58:06.370 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 11:58:06.378 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 11:58:06.423 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 11:58:06.425 +00:00 [DBG] Start discovery request
2021-06-13 11:58:07.315 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 11:58:07.865 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 11:58:07.868 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 11:58:07.871 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 11:58:07.874 +00:00 [DBG] Start key discovery request
2021-06-13 12:12:43.917 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 12:12:43.923 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 12:12:43.924 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 12:12:43.926 +00:00 [DBG] Start authorize request
2021-06-13 12:12:43.927 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 12:12:43.928 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 12:12:52.199 +00:00 [DBG] api-swagger found in database: true
2021-06-13 12:12:52.201 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 12:12:52.506 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 12:12:53.017 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 12:12:53.528 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 12:12:53.890 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 12:12:53.904 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 12:12:53.916 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDEyOjEyOjQzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDEyOjEyOjQzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 12:12:55.157 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 12:12:55.160 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 12:12:55.165 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 12:12:55.167 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 12:12:55.167 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 12:12:56.193 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 12:12:56.206 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****wqsQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9E5O2C7BTU:0000000F","TimeStamp":"2021-06-13T12:12:56.0000000Z","ProcessId":24500,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 12:12:56.220 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDEyOjEyOjQzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 12:16:29.680 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 12:16:29.686 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 12:16:29.731 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 12:16:29.734 +00:00 [DBG] Start discovery request
2021-06-13 12:16:31.339 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 12:16:31.835 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 12:16:31.838 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 12:16:31.844 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 12:16:31.846 +00:00 [DBG] Start key discovery request
2021-06-13 12:17:09.326 +00:00 [INF] Removing 0 grants
2021-06-13 12:17:09.735 +00:00 [INF] Removing 0 device flow codes
2021-06-13 12:31:16.800 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 12:31:16.804 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 12:31:16.850 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 12:31:16.852 +00:00 [DBG] Start authorize request
2021-06-13 12:31:16.856 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 12:31:16.861 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 12:31:23.474 +00:00 [DBG] api-swagger found in database: true
2021-06-13 12:31:23.476 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 12:31:23.965 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 12:31:24.679 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 12:31:25.294 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 12:31:26.318 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 12:31:26.323 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 12:31:26.328 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDEyOjMxOjEzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDEyOjMxOjEzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 12:31:26.699 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 12:31:26.704 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 12:31:26.705 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 12:31:26.706 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 12:31:26.709 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 12:31:27.913 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 12:31:27.929 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****FqKg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9E5O2C7BU0:0000000F","TimeStamp":"2021-06-13T12:31:27.0000000Z","ProcessId":24500,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 12:31:27.945 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDEyOjMxOjEzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 12:32:48.759 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 12:32:48.763 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 12:32:48.765 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 12:32:48.766 +00:00 [DBG] Start discovery request
2021-06-13 12:32:49.717 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 12:32:50.053 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 12:32:50.055 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 12:32:50.056 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 12:32:50.056 +00:00 [DBG] Start key discovery request
2021-06-13 13:04:35.229 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 13:04:35.282 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 13:04:35.284 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 13:04:35.286 +00:00 [DBG] Start authorize request
2021-06-13 13:04:35.287 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 13:04:35.289 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 13:04:40.881 +00:00 [DBG] api-swagger found in database: true
2021-06-13 13:04:40.928 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 13:04:41.416 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 13:04:42.007 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 13:04:42.416 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 13:04:43.031 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 13:04:43.034 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 13:04:43.036 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDEzOjA0OjMxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDEzOjA0OjMxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 13:04:43.747 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 13:04:43.750 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 13:04:43.752 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 13:04:43.755 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 13:04:43.762 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 13:04:44.444 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 13:04:44.455 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****P2cw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9E5O2C7BU2:0000000F","TimeStamp":"2021-06-13T13:04:44.0000000Z","ProcessId":24500,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 13:04:44.512 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDEzOjA0OjMxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 13:07:08.554 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 13:07:08.559 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 13:07:08.561 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 13:07:08.565 +00:00 [DBG] Start discovery request
2021-06-13 13:07:09.572 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 13:07:10.066 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 13:07:10.069 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 13:07:10.120 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 13:07:10.123 +00:00 [DBG] Start key discovery request
2021-06-13 16:51:24.655 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-13 16:51:24.680 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-13 16:51:24.747 +00:00 [ERR] Exception removing expired grants: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
2021-06-13 17:00:05.362 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-13 17:00:05.439 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'EBookkeepingAuth.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-13 17:00:05.581 +00:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at Microsoft.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-13 17:00:05.625 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.SignInManager`1.ValidateSecurityStampAsync(ClaimsPrincipal principal)
   at Microsoft.AspNetCore.Identity.SecurityStampValidator`1.ValidateAsync(CookieValidatePrincipalContext context)
   at Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-13 17:00:56.882 +00:00 [INF] Starting host...
2021-06-13 17:00:57.537 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-06-13 17:00:58.518 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-06-13 17:00:58.536 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-06-13 17:00:58.537 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-06-13 17:00:58.538 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-06-13 17:00:58.539 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-06-13 17:00:58.540 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-06-13 17:00:58.541 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-06-13 17:01:07.710 +00:00 [DBG] Login Url: /Account/Login
2021-06-13 17:01:07.716 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-06-13 17:01:07.720 +00:00 [DBG] Logout Url: /Account/Logout
2021-06-13 17:01:07.723 +00:00 [DBG] ConsentUrl Url: /consent
2021-06-13 17:01:07.725 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-06-13 17:01:07.726 +00:00 [DBG] Error Url: /home/error
2021-06-13 17:01:07.728 +00:00 [DBG] Error Id Parameter: errorId
2021-06-13 17:01:30.768 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-13 17:01:31.124 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'EBookkeepingAuth.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=18903; handshake=88; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:18230daa-68a1-496c-ae17-443a170528ba
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=18903; handshake=88; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:18230daa-68a1-496c-ae17-443a170528ba
Error Number:-2,State:0,Class:11
2021-06-13 17:01:53.107 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=18903; handshake=88; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.SignInManager`1.ValidateSecurityStampAsync(ClaimsPrincipal principal)
   at Microsoft.AspNetCore.Identity.SecurityStampValidator`1.ValidateAsync(CookieValidatePrincipalContext context)
   at Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:18230daa-68a1-496c-ae17-443a170528ba
Error Number:-2,State:0,Class:11
2021-06-13 17:05:48.564 +00:00 [INF] Starting host...
2021-06-13 17:05:49.098 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-06-13 17:05:49.729 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-06-13 17:05:49.738 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-06-13 17:05:49.739 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-06-13 17:05:49.740 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-06-13 17:05:49.741 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-06-13 17:05:49.741 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-06-13 17:05:49.742 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-06-13 17:05:55.611 +00:00 [DBG] Login Url: /Account/Login
2021-06-13 17:05:55.617 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-06-13 17:05:55.618 +00:00 [DBG] Logout Url: /Account/Logout
2021-06-13 17:05:55.619 +00:00 [DBG] ConsentUrl Url: /consent
2021-06-13 17:05:55.619 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-06-13 17:05:55.620 +00:00 [DBG] Error Url: /home/error
2021-06-13 17:05:55.620 +00:00 [DBG] Error Id Parameter: errorId
2021-06-13 17:06:35.895 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 17:06:35.905 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 17:06:35.906 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 17:06:35.910 +00:00 [DBG] Start authorize request
2021-06-13 17:06:35.926 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 17:06:35.932 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 17:06:58.127 +00:00 [DBG] api-swagger found in database: true
2021-06-13 17:06:58.184 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 17:07:01.051 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 17:07:03.645 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 17:07:07.445 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 17:07:12.469 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 17:07:12.512 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 17:07:12.587 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDE3OjA2OjM1IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDE3OjA2OjM1IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 17:07:16.708 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 17:07:16.808 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 17:07:16.827 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 17:07:16.887 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 17:07:16.890 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 17:07:21.928 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 17:07:22.860 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****dhPA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9EHLVPPRJ8:00000021","TimeStamp":"2021-06-13T17:07:22.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 17:07:22.886 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDE3OjA2OjM1IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 17:10:44.791 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 17:10:44.801 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 17:10:44.810 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 17:10:44.814 +00:00 [DBG] Start authorize request
2021-06-13 17:10:44.816 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 17:10:44.818 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 17:10:55.186 +00:00 [DBG] api-swagger found in database: true
2021-06-13 17:10:55.188 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 17:10:56.311 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 17:10:57.404 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 17:10:57.972 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 17:10:58.464 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 17:10:58.471 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 17:10:58.476 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDE3OjEwOjQ0IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDE3OjEwOjQ0IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 17:10:59.747 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 17:10:59.753 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 17:10:59.755 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 17:10:59.757 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 17:10:59.763 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 17:11:01.734 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 17:11:01.753 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****MRAg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9EHLVPPRJ9:0000000F","TimeStamp":"2021-06-13T17:11:01.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 17:11:01.769 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDE3OjEwOjQ0IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 17:12:35.226 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 17:12:35.241 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 17:12:35.246 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 17:12:35.256 +00:00 [DBG] Start discovery request
2021-06-13 17:12:37.319 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 17:12:38.111 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 17:12:38.125 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 17:12:38.128 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 17:12:38.140 +00:00 [DBG] Start key discovery request
2021-06-13 17:46:24.693 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 17:46:24.743 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 17:46:24.751 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 17:46:24.758 +00:00 [DBG] Start authorize request
2021-06-13 17:46:24.763 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 17:46:24.777 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 17:47:28.504 +00:00 [DBG] api-swagger found in database: true
2021-06-13 17:47:28.506 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 17:47:31.714 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 17:47:39.353 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 17:47:46.432 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 17:47:51.342 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 17:47:51.352 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 17:47:51.359 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDE3OjQ1OjUwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDE3OjQ1OjUwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 17:47:54.428 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 17:47:54.438 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 17:47:54.457 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 17:47:54.465 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 17:47:54.469 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 17:48:03.941 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 17:48:03.967 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****VVYQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9EHLVPPRJB:0000000F","TimeStamp":"2021-06-13T17:48:03.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 17:48:03.996 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDE3OjQ1OjUwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 17:48:29.714 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 17:48:29.729 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 17:48:29.733 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 17:48:29.737 +00:00 [DBG] Start discovery request
2021-06-13 17:48:34.132 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 17:48:34.784 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 17:48:34.829 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 17:48:34.848 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 17:48:34.878 +00:00 [DBG] Start key discovery request
2021-06-13 17:54:19.622 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 17:54:19.627 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 17:54:19.634 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 17:54:19.636 +00:00 [DBG] Start authorize request
2021-06-13 17:54:19.637 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 17:54:19.639 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 17:55:03.837 +00:00 [DBG] api-swagger found in database: true
2021-06-13 17:55:03.839 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 17:55:05.627 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 17:55:40.755 +00:00 [ERR] Failed executing DbCommand (35,062ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Created], [a].[Description], [a].[DisplayName], [a].[Enabled], [a].[LastAccessed], [a].[Name], [a].[NonEditable], [a].[Updated], [a0].[Id], [a0].[ApiResourceId], [a0].[Created], [a0].[Description], [a0].[Expiration], [a0].[Type], [a0].[Value], [t].[Id], [t].[ApiResourceId], [t].[Description], [t].[DisplayName], [t].[Emphasize], [t].[Name], [t].[Required], [t].[ShowInDiscoveryDocument], [t].[Id0], [t].[ApiScopeId], [t].[Type], [a3].[Id], [a3].[ApiResourceId], [a3].[Type], [a4].[Id], [a4].[ApiResourceId], [a4].[Key], [a4].[Value]
FROM [ApiResources] AS [a]
LEFT JOIN [ApiSecrets] AS [a0] ON [a].[Id] = [a0].[ApiResourceId]
LEFT JOIN (
    SELECT [a1].[Id], [a1].[ApiResourceId], [a1].[Description], [a1].[DisplayName], [a1].[Emphasize], [a1].[Name], [a1].[Required], [a1].[ShowInDiscoveryDocument], [a2].[Id] AS [Id0], [a2].[ApiScopeId], [a2].[Type]
    FROM [ApiScopes] AS [a1]
    LEFT JOIN [ApiScopeClaims] AS [a2] ON [a1].[Id] = [a2].[ApiScopeId]
) AS [t] ON [a].[Id] = [t].[ApiResourceId]
LEFT JOIN [ApiClaims] AS [a3] ON [a].[Id] = [a3].[ApiResourceId]
LEFT JOIN [ApiProperties] AS [a4] ON [a].[Id] = [a4].[ApiResourceId]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [a5]
    WHERE ([a].[Id] = [a5].[ApiResourceId]) AND [a5].[Name] IN (N'ebookkeeping-api'))
ORDER BY [a].[Id], [a0].[Id], [t].[Id], [t].[Id0], [a3].[Id], [a4].[Id]
2021-06-13 17:55:41.052 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0a107589-a918-47fb-bd6f-5e69cda1a637
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0a107589-a918-47fb-bd6f-5e69cda1a637
Error Number:-2,State:0,Class:11
2021-06-13 17:55:41.207 +00:00 [INF] {"Details":"Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.\r\n ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.\r\n   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at IdentityServer4.EntityFramework.Stores.ResourceStore.FindApiResourcesByScopeAsync(IEnumerable`1 scopeNames)\r\n   at IdentityServer4.Stores.IResourceStoreExtensions.FindResourcesByScopeAsync(IResourceStore store, IEnumerable`1 scopeNames)\r\n   at IdentityServer4.Validation.ScopeValidator.AreScopesValidAsync(IEnumerable`1 requestedScopes, Boolean filterIdentityScopes)\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateScopeAsync(ValidatedAuthorizeRequest request)\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)\r\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)\r\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)\r\nClientConnectionId:0a107589-a918-47fb-bd6f-5e69cda1a637\r\nError Number:-2,State:0,Class:11","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.","ActivityId":"0HM9EHLVPPRJD:0000000F","TimeStamp":"2021-06-13T17:55:41.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"UnhandledExceptionEvent"}
2021-06-13 17:55:41.281 +00:00 [FTL] Unhandled exception: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.FindApiResourcesByScopeAsync(IEnumerable`1 scopeNames)
   at IdentityServer4.Stores.IResourceStoreExtensions.FindResourcesByScopeAsync(IResourceStore store, IEnumerable`1 scopeNames)
   at IdentityServer4.Validation.ScopeValidator.AreScopesValidAsync(IEnumerable`1 requestedScopes, Boolean filterIdentityScopes)
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateScopeAsync(ValidatedAuthorizeRequest request)
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
ClientConnectionId:0a107589-a918-47fb-bd6f-5e69cda1a637
Error Number:-2,State:0,Class:11
2021-06-13 17:56:06.026 +00:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-13 17:56:06.683 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.FindApiResourcesByScopeAsync(IEnumerable`1 scopeNames)
   at IdentityServer4.Stores.IResourceStoreExtensions.FindResourcesByScopeAsync(IResourceStore store, IEnumerable`1 scopeNames)
   at IdentityServer4.Validation.ScopeValidator.AreScopesValidAsync(IEnumerable`1 requestedScopes, Boolean filterIdentityScopes)
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateScopeAsync(ValidatedAuthorizeRequest request)
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:0a107589-a918-47fb-bd6f-5e69cda1a637
Error Number:-2,State:0,Class:11
2021-06-13 17:56:15.280 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 17:56:15.289 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 17:56:15.293 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 17:56:15.300 +00:00 [DBG] Start authorize request
2021-06-13 17:56:15.303 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 17:56:15.308 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 17:56:29.541 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-13 17:56:29.558 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=5814; handshake=3281; [Login] initialization=0; authentication=0; [Post-Login] complete=5007; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:fee50809-872c-4d3b-8060-98bce2a57416
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=5814; handshake=3281; [Login] initialization=0; authentication=0; [Post-Login] complete=5007; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:fee50809-872c-4d3b-8060-98bce2a57416
Error Number:-2,State:0,Class:11
2021-06-13 17:56:29.774 +00:00 [INF] {"Details":"Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=5814; handshake=3281; [Login] initialization=0; authentication=0; [Post-Login] complete=5007; \r\n ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)\r\n   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()\r\n   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()\r\n   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()\r\n   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId)\r\n   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId)\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId)\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.LoadClientAsync(ValidatedAuthorizeRequest request)\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)\r\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)\r\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)\r\nClientConnectionId:fee50809-872c-4d3b-8060-98bce2a57416\r\nError Number:-2,State:0,Class:11","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=5814; handshake=3281; [Login] initialization=0; authentication=0; [Post-Login] complete=5007; ","ActivityId":"0HM9EHLVPPRJD:00000011","TimeStamp":"2021-06-13T17:56:29.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"UnhandledExceptionEvent"}
2021-06-13 17:56:29.920 +00:00 [FTL] Unhandled exception: Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=5814; handshake=3281; [Login] initialization=0; authentication=0; [Post-Login] complete=5007; 
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=5814; handshake=3281; [Login] initialization=0; authentication=0; [Post-Login] complete=5007; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId)
   at IdentityServer4.Validation.AuthorizeRequestValidator.LoadClientAsync(ValidatedAuthorizeRequest request)
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
ClientConnectionId:fee50809-872c-4d3b-8060-98bce2a57416
Error Number:-2,State:0,Class:11
2021-06-13 17:56:45.182 +00:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.WaitForSSLHandShakeToComplete(UInt32& error)
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:fd262136-ad84-4e55-8c21-b58d9bde4dd6
Error Number:258,State:0,Class:20
2021-06-13 17:56:45.306 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=5814; handshake=3281; [Login] initialization=0; authentication=0; [Post-Login] complete=5007; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId)
   at IdentityServer4.Validation.AuthorizeRequestValidator.LoadClientAsync(ValidatedAuthorizeRequest request)
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:fee50809-872c-4d3b-8060-98bce2a57416
Error Number:-2,State:0,Class:11
2021-06-13 17:57:07.387 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 17:57:07.417 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 17:57:07.421 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 17:57:07.436 +00:00 [DBG] Start authorize request
2021-06-13 17:57:07.441 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 17:57:07.443 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 17:57:22.553 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-13 17:57:22.581 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.WaitForSSLHandShakeToComplete(UInt32& error)
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:073a3145-359c-4094-b4be-4438f9bafdd1
Error Number:258,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.WaitForSSLHandShakeToComplete(UInt32& error)
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:073a3145-359c-4094-b4be-4438f9bafdd1
Error Number:258,State:0,Class:20
2021-06-13 17:57:22.812 +00:00 [INF] {"Details":"Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)\r\n ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.WaitForSSLHandShakeToComplete(UInt32& error)\r\n   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)\r\n   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId)\r\n   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId)\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId)\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.LoadClientAsync(ValidatedAuthorizeRequest request)\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)\r\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)\r\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)\r\nClientConnectionId:073a3145-359c-4094-b4be-4438f9bafdd1\r\nError Number:258,State:0,Class:20","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)","ActivityId":"0HM9EHLVPPRJD:00000013","TimeStamp":"2021-06-13T17:57:22.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"UnhandledExceptionEvent"}
2021-06-13 17:57:22.951 +00:00 [FTL] Unhandled exception: A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.WaitForSSLHandShakeToComplete(UInt32& error)
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId)
   at IdentityServer4.Validation.AuthorizeRequestValidator.LoadClientAsync(ValidatedAuthorizeRequest request)
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
ClientConnectionId:073a3145-359c-4094-b4be-4438f9bafdd1
Error Number:258,State:0,Class:20
2021-06-13 17:57:23.138 +00:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at Microsoft.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:073a3145-359c-4094-b4be-4438f9bafdd1
Error Number:258,State:0,Class:20
2021-06-13 17:57:23.195 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.WaitForSSLHandShakeToComplete(UInt32& error)
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId)
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId)
   at IdentityServer4.Validation.AuthorizeRequestValidator.LoadClientAsync(ValidatedAuthorizeRequest request)
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject)
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent)
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:073a3145-359c-4094-b4be-4438f9bafdd1
Error Number:258,State:0,Class:20
2021-06-13 17:58:31.213 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 17:58:31.232 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 17:58:31.266 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 17:58:31.287 +00:00 [DBG] Start authorize request
2021-06-13 17:58:31.297 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 17:58:31.310 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 17:59:16.785 +00:00 [DBG] api-swagger found in database: true
2021-06-13 17:59:16.790 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 17:59:18.399 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 17:59:23.660 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 17:59:28.157 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 17:59:33.017 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 17:59:33.025 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 17:59:33.031 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDE3OjU4OjMxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDE3OjU4OjMxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 17:59:38.147 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 17:59:38.158 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 17:59:38.170 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 17:59:38.175 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 17:59:38.185 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 17:59:42.320 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 17:59:42.339 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****RjBg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9EHLVPPRJD:00000015","TimeStamp":"2021-06-13T17:59:42.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 17:59:42.371 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDE3OjU4OjMxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 18:00:11.631 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 18:00:11.653 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 18:00:11.657 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 18:00:11.670 +00:00 [DBG] Start discovery request
2021-06-13 18:00:14.469 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 18:00:14.995 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 18:00:15.006 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 18:00:15.008 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 18:00:15.010 +00:00 [DBG] Start key discovery request
2021-06-13 18:05:55.545 +00:00 [INF] Removing 0 grants
2021-06-13 18:05:56.594 +00:00 [INF] Removing 0 device flow codes
2021-06-13 18:15:23.836 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 18:15:23.845 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 18:15:23.852 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 18:15:23.879 +00:00 [DBG] Start authorize request
2021-06-13 18:15:23.882 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 18:15:23.887 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 18:15:33.824 +00:00 [DBG] api-swagger found in database: true
2021-06-13 18:15:33.826 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 18:15:34.318 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 18:15:34.920 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 18:15:35.457 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 18:15:36.101 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 18:15:36.111 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 18:15:36.131 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDE4OjE1OjIzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDE4OjE1OjIzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 18:15:37.409 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 18:15:37.419 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 18:15:37.423 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 18:15:37.426 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 18:15:37.439 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 18:15:38.633 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 18:15:38.649 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****umUA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9EHLVPPRJF:0000000F","TimeStamp":"2021-06-13T18:15:38.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 18:15:38.679 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDE4OjE1OjIzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 18:16:17.014 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 18:16:17.021 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 18:16:17.026 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 18:16:17.028 +00:00 [DBG] Start discovery request
2021-06-13 18:16:17.959 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 18:16:18.466 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 18:16:18.523 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 18:16:18.526 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 18:16:18.533 +00:00 [DBG] Start key discovery request
2021-06-13 18:40:20.713 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 18:40:20.721 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 18:40:20.733 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 18:40:20.737 +00:00 [DBG] Start authorize request
2021-06-13 18:40:20.739 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 18:40:20.741 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 18:40:28.793 +00:00 [DBG] api-swagger found in database: true
2021-06-13 18:40:28.795 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 18:40:29.895 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 18:40:31.022 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 18:40:31.943 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 18:40:32.968 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 18:40:32.976 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 18:40:32.988 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDE4OjQwOjEwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDE4OjQwOjEwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 18:40:34.402 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 18:40:34.424 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 18:40:34.429 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 18:40:34.434 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 18:40:34.435 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 18:40:36.458 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 18:40:36.474 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****BwmQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9EHLVPPRJH:0000000F","TimeStamp":"2021-06-13T18:40:36.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 18:40:36.506 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDE4OjQwOjEwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 18:41:19.450 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 18:41:19.457 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 18:41:19.462 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 18:41:19.475 +00:00 [DBG] Start discovery request
2021-06-13 18:41:22.122 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 18:41:22.661 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 18:41:22.678 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 18:41:22.682 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 18:41:22.688 +00:00 [DBG] Start key discovery request
2021-06-13 19:06:12.461 +00:00 [INF] Removing 0 grants
2021-06-13 19:06:19.439 +00:00 [INF] Removing 0 device flow codes
2021-06-13 20:00:32.429 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-13 20:00:32.455 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'EBookkeepingAuth.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=17443; handshake=4; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b49ab79f-acaf-41bf-9260-95a90c7585fa
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=17443; handshake=4; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b49ab79f-acaf-41bf-9260-95a90c7585fa
Error Number:-2,State:0,Class:11
2021-06-13 20:01:05.990 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=17443; handshake=4; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.SignInManager`1.ValidateSecurityStampAsync(ClaimsPrincipal principal)
   at Microsoft.AspNetCore.Identity.SecurityStampValidator`1.ValidateAsync(CookieValidatePrincipalContext context)
   at Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:b49ab79f-acaf-41bf-9260-95a90c7585fa
Error Number:-2,State:0,Class:11
2021-06-13 20:01:26.976 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 20:01:26.990 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 20:01:27.005 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 20:01:27.012 +00:00 [DBG] Start authorize request
2021-06-13 20:01:27.017 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 20:01:27.038 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 20:02:19.605 +00:00 [DBG] api-swagger found in database: true
2021-06-13 20:02:19.608 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 20:02:21.447 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 20:02:29.245 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 20:02:32.590 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 20:02:38.959 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 20:02:38.966 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 20:02:38.975 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDIwOjAxOjEzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDIwOjAxOjEzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 20:02:42.952 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 20:02:42.964 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 20:02:42.966 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 20:02:42.978 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 20:02:42.983 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 20:02:51.554 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 20:02:51.572 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****2bXQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9EHLVPPRJJ:00000011","TimeStamp":"2021-06-13T20:02:51.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 20:02:51.639 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDIwOjAxOjEzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 20:05:46.334 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 20:05:46.340 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 20:05:46.345 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 20:05:46.347 +00:00 [DBG] Start discovery request
2021-06-13 20:06:01.377 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-13 20:06:01.406 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=9328; handshake=5685; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at Microsoft.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:99c5ed44-db75-43ce-b932-557c1dadcaaf
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=9328; handshake=5685; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at Microsoft.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:99c5ed44-db75-43ce-b932-557c1dadcaaf
Error Number:-2,State:0,Class:11
2021-06-13 20:06:01.764 +00:00 [INF] {"Details":"Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=9328; handshake=5685; \r\n ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)\r\n   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()\r\n   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()\r\n   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)\r\n   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)\r\n   at Microsoft.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()\r\n   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)\r\n   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)\r\n   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)\r\nClientConnectionId:99c5ed44-db75-43ce-b932-557c1dadcaaf\r\nError Number:-2,State:0,Class:11","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=9328; handshake=5685; ","ActivityId":"0HM9EHLVPPRJK:00000001","TimeStamp":"2021-06-13T20:06:01.0000000Z","ProcessId":37536,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2021-06-13 20:06:01.903 +00:00 [FTL] Unhandled exception: Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=9328; handshake=5685; 
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=9328; handshake=5685; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at Microsoft.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
ClientConnectionId:99c5ed44-db75-43ce-b932-557c1dadcaaf
Error Number:-2,State:0,Class:11
2021-06-13 20:06:33.880 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-13 20:06:33.905 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=16088; handshake=0; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:1d857824-f941-4172-b4f7-77ceccc4dbd8
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=16088; handshake=0; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:1d857824-f941-4172-b4f7-77ceccc4dbd8
Error Number:-2,State:0,Class:11
2021-06-13 20:06:34.068 +00:00 [ERR] Exception removing expired grants: Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=16088; handshake=0; 
2021-06-13 20:07:06.723 +00:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=16607; handshake=0; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:dbb10bfe-28e0-4082-99cf-e1b5b40dbee0
Error Number:-2,State:0,Class:11
2021-06-13 20:07:06.875 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=9328; handshake=5685; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at Microsoft.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:99c5ed44-db75-43ce-b932-557c1dadcaaf
Error Number:-2,State:0,Class:11
2021-06-13 20:08:37.809 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 20:08:37.812 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 20:08:37.816 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 20:08:37.816 +00:00 [DBG] Start discovery request
2021-06-13 20:08:59.896 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-13 20:08:59.900 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-13 20:08:59.932 +00:00 [INF] {"Details":"Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()\r\n   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)\r\n   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)\r\n   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)\r\nClientConnectionId:00000000-0000-0000-0000-000000000000\r\nError Number:-1,State:0,Class:20","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)","ActivityId":"0HM9EHLVPPRJL:00000001","TimeStamp":"2021-06-13T20:08:59.0000000Z","ProcessId":37536,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2021-06-13 20:08:59.945 +00:00 [FTL] Unhandled exception: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-13 20:09:14.736 +00:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-13 20:09:14.792 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2021-06-13 20:13:10.657 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-13 20:13:10.662 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-13 20:13:10.666 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-13 20:13:10.667 +00:00 [DBG] Start discovery request
2021-06-13 20:13:23.353 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-13 20:13:23.444 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-13 20:13:23.448 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-13 20:13:23.451 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-13 20:13:23.452 +00:00 [DBG] Start key discovery request
2021-06-13 20:56:05.526 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-13 20:56:05.537 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-13 20:56:05.539 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-13 20:56:05.543 +00:00 [DBG] Start authorize request
2021-06-13 20:56:05.544 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 20:56:05.544 +00:00 [DBG] Start authorize request protocol validation
2021-06-13 20:56:12.325 +00:00 [DBG] api-swagger found in database: true
2021-06-13 20:56:12.326 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-13 20:56:12.824 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 20:56:13.369 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 20:56:13.825 +00:00 [DBG] Found [] identity scopes in database
2021-06-13 20:56:14.411 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-13 20:56:14.413 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-13 20:56:14.423 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"U3VuIEp1biAxMyAyMDIxIDIwOjU2OjAxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"U3VuIEp1biAxMyAyMDIxIDIwOjU2OjAxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-13 20:56:15.261 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-13 20:56:15.264 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-13 20:56:15.266 +00:00 [DBG] Creating Implicit Flow response.
2021-06-13 20:56:15.267 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-13 20:56:15.267 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-13 20:56:16.849 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-13 20:56:16.859 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****l7SQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9EHLVPPRJN:0000000F","TimeStamp":"2021-06-13T20:56:16.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-13 20:56:16.863 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"U3VuIEp1biAxMyAyMDIxIDIwOjU2OjAxIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-13 21:06:36.715 +00:00 [INF] Removing 0 grants
2021-06-13 21:06:37.329 +00:00 [INF] Removing 0 device flow codes
2021-06-14 01:06:24.094 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-14 01:06:24.121 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-14 01:06:24.125 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-14 01:06:24.137 +00:00 [DBG] Start authorize request
2021-06-14 01:06:24.142 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 01:06:24.147 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 01:06:31.055 +00:00 [DBG] api-swagger found in database: true
2021-06-14 01:06:31.106 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 01:06:31.536 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 01:06:32.200 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 01:06:32.548 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 01:06:32.861 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 01:06:32.868 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 01:06:32.884 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"TW9uIEp1biAxNCAyMDIxIDAxOjA2OjE1IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"TW9uIEp1biAxNCAyMDIxIDAxOjA2OjE1IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-14 01:06:33.226 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-14 01:06:33.246 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-14 01:06:33.263 +00:00 [DBG] Creating Implicit Flow response.
2021-06-14 01:06:33.265 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-14 01:06:33.267 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 01:06:34.919 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-14 01:06:34.989 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****ZwyQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9EHLVPPRJO:0000000F","TimeStamp":"2021-06-14T01:06:34.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-14 01:06:35.029 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"TW9uIEp1biAxNCAyMDIxIDAxOjA2OjE1IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-14 01:07:49.497 +00:00 [INF] Removing 0 grants
2021-06-14 01:07:49.656 +00:00 [INF] Removing 0 device flow codes
2021-06-14 01:11:19.951 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-14 01:11:19.956 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-14 01:11:19.960 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-14 01:11:19.964 +00:00 [DBG] Start authorize request
2021-06-14 01:11:19.965 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 01:11:19.967 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 01:11:37.579 +00:00 [DBG] api-swagger found in database: true
2021-06-14 01:11:37.582 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 01:11:38.285 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 01:11:42.470 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 01:11:47.006 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 01:11:48.325 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 01:11:48.328 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 01:11:48.332 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"TW9uIEp1biAxNCAyMDIxIDAxOjExOjE5IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"TW9uIEp1biAxNCAyMDIxIDAxOjExOjE5IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-14 01:11:50.331 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-14 01:11:50.339 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-14 01:11:50.343 +00:00 [DBG] Creating Implicit Flow response.
2021-06-14 01:11:50.344 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-14 01:11:50.345 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 01:11:54.854 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-14 01:11:54.861 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****Aj3g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9EHLVPPRJP:0000000F","TimeStamp":"2021-06-14T01:11:54.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-14 01:11:54.901 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"TW9uIEp1biAxNCAyMDIxIDAxOjExOjE5IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-14 01:12:36.737 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-14 01:12:36.748 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-14 01:12:36.760 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-14 01:12:36.764 +00:00 [DBG] Start discovery request
2021-06-14 01:13:06.079 +00:00 [ERR] Failed executing DbCommand (29,305ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[Created], [i].[Description], [i].[DisplayName], [i].[Emphasize], [i].[Enabled], [i].[Name], [i].[NonEditable], [i].[Required], [i].[ShowInDiscoveryDocument], [i].[Updated], [i0].[Id], [i0].[IdentityResourceId], [i0].[Type], [i1].[Id], [i1].[IdentityResourceId], [i1].[Key], [i1].[Value]
FROM [IdentityResources] AS [i]
LEFT JOIN [IdentityClaims] AS [i0] ON [i].[Id] = [i0].[IdentityResourceId]
LEFT JOIN [IdentityProperties] AS [i1] ON [i].[Id] = [i1].[IdentityResourceId]
ORDER BY [i].[Id], [i0].[Id], [i1].[Id]
2021-06-14 01:13:06.155 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): A transport-level error has occurred when receiving results from the server. (provider: TCP Provider, error: 0 - The semaphore timeout period has expired.)
 ---> System.ComponentModel.Win32Exception (121): The semaphore timeout period has expired.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:cab19ce5-78b6-4e3a-8c53-7d78296c70bc
Error Number:121,State:0,Class:20
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): A transport-level error has occurred when receiving results from the server. (provider: TCP Provider, error: 0 - The semaphore timeout period has expired.)
 ---> System.ComponentModel.Win32Exception (121): The semaphore timeout period has expired.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:cab19ce5-78b6-4e3a-8c53-7d78296c70bc
Error Number:121,State:0,Class:20
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-06-14 01:13:06.284 +00:00 [INF] {"Details":"System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseSqlServer' call.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): A transport-level error has occurred when receiving results from the server. (provider: TCP Provider, error: 0 - The semaphore timeout period has expired.)\r\n ---> System.ComponentModel.Win32Exception (121): The semaphore timeout period has expired.\r\n   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\nClientConnectionId:cab19ce5-78b6-4e3a-8c53-7d78296c70bc\r\nError Number:121,State:0,Class:20\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()\r\n   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)\r\n   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)\r\n   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseSqlServer' call.","ActivityId":"0HM9EHLVPPRJQ:00000001","TimeStamp":"2021-06-14T01:13:06.0000000Z","ProcessId":37536,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2021-06-14 01:13:06.376 +00:00 [FTL] Unhandled exception: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseSqlServer' call.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): A transport-level error has occurred when receiving results from the server. (provider: TCP Provider, error: 0 - The semaphore timeout period has expired.)
 ---> System.ComponentModel.Win32Exception (121): The semaphore timeout period has expired.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:cab19ce5-78b6-4e3a-8c53-7d78296c70bc
Error Number:121,State:0,Class:20
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
2021-06-14 01:13:13.248 +00:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): A transport-level error has occurred when receiving results from the server. (provider: TCP Provider, error: 0 - The semaphore timeout period has expired.)
 ---> System.ComponentModel.Win32Exception (121): The semaphore timeout period has expired.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:cab19ce5-78b6-4e3a-8c53-7d78296c70bc
Error Number:121,State:0,Class:20
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-14 01:13:55.039 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-14 01:13:55.060 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-14 01:13:55.070 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-14 01:13:55.076 +00:00 [DBG] Start discovery request
2021-06-14 01:14:47.666 +00:00 [ERR] Failed executing DbCommand (35,050ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Created], [a].[Description], [a].[DisplayName], [a].[Enabled], [a].[LastAccessed], [a].[Name], [a].[NonEditable], [a].[Updated], [a0].[Id], [a0].[ApiResourceId], [a0].[Created], [a0].[Description], [a0].[Expiration], [a0].[Type], [a0].[Value], [t].[Id], [t].[ApiResourceId], [t].[Description], [t].[DisplayName], [t].[Emphasize], [t].[Name], [t].[Required], [t].[ShowInDiscoveryDocument], [t].[Id0], [t].[ApiScopeId], [t].[Type], [a3].[Id], [a3].[ApiResourceId], [a3].[Type], [a4].[Id], [a4].[ApiResourceId], [a4].[Key], [a4].[Value]
FROM [ApiResources] AS [a]
LEFT JOIN [ApiSecrets] AS [a0] ON [a].[Id] = [a0].[ApiResourceId]
LEFT JOIN (
    SELECT [a1].[Id], [a1].[ApiResourceId], [a1].[Description], [a1].[DisplayName], [a1].[Emphasize], [a1].[Name], [a1].[Required], [a1].[ShowInDiscoveryDocument], [a2].[Id] AS [Id0], [a2].[ApiScopeId], [a2].[Type]
    FROM [ApiScopes] AS [a1]
    LEFT JOIN [ApiScopeClaims] AS [a2] ON [a1].[Id] = [a2].[ApiScopeId]
) AS [t] ON [a].[Id] = [t].[ApiResourceId]
LEFT JOIN [ApiClaims] AS [a3] ON [a].[Id] = [a3].[ApiResourceId]
LEFT JOIN [ApiProperties] AS [a4] ON [a].[Id] = [a4].[ApiResourceId]
ORDER BY [a].[Id], [a0].[Id], [t].[Id], [t].[Id0], [a3].[Id], [a4].[Id]
2021-06-14 01:14:47.751 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:259c6280-3935-49f8-9e5b-55af6b7273f3
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:259c6280-3935-49f8-9e5b-55af6b7273f3
Error Number:-2,State:0,Class:11
2021-06-14 01:14:47.928 +00:00 [INF] {"Details":"Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.\r\n ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.\r\n   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()\r\n   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)\r\n   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)\r\n   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)\r\nClientConnectionId:259c6280-3935-49f8-9e5b-55af6b7273f3\r\nError Number:-2,State:0,Class:11","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.","ActivityId":"0HM9EHLVPPRJQ:00000002","TimeStamp":"2021-06-14T01:14:47.0000000Z","ProcessId":37536,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2021-06-14 01:14:48.014 +00:00 [FTL] Unhandled exception: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
ClientConnectionId:259c6280-3935-49f8-9e5b-55af6b7273f3
Error Number:-2,State:0,Class:11
2021-06-14 01:15:03.293 +00:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.WaitForSSLHandShakeToComplete(UInt32& error)
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:32c8e6db-847d-443a-976c-23098617762d
Error Number:258,State:0,Class:20
2021-06-14 01:15:03.370 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:259c6280-3935-49f8-9e5b-55af6b7273f3
Error Number:-2,State:0,Class:11
2021-06-14 01:15:48.881 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-14 01:15:48.885 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-14 01:15:48.889 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-14 01:15:48.891 +00:00 [DBG] Start discovery request
2021-06-14 01:16:03.953 +00:00 [ERR] An error occurred using the connection to database 'Ebookkeeping.Application' on server 'psl-dbserver-vm3\swd17dev'.
2021-06-14 01:16:03.964 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.WaitForSSLHandShakeToComplete(UInt32& error)
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:49da4301-2ec6-4655-a7e9-67fa7c2b9ae3
Error Number:258,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.WaitForSSLHandShakeToComplete(UInt32& error)
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:49da4301-2ec6-4655-a7e9-67fa7c2b9ae3
Error Number:258,State:0,Class:20
2021-06-14 01:16:04.042 +00:00 [INF] {"Details":"Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)\r\n ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.WaitForSSLHandShakeToComplete(UInt32& error)\r\n   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)\r\n   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()\r\n   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)\r\n   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)\r\n   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)\r\nClientConnectionId:49da4301-2ec6-4655-a7e9-67fa7c2b9ae3\r\nError Number:258,State:0,Class:20","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)","ActivityId":"0HM9EHLVPPRJR:00000001","TimeStamp":"2021-06-14T01:16:04.0000000Z","ProcessId":37536,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2021-06-14 01:16:04.079 +00:00 [FTL] Unhandled exception: A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.WaitForSSLHandShakeToComplete(UInt32& error)
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
ClientConnectionId:49da4301-2ec6-4655-a7e9-67fa7c2b9ae3
Error Number:258,State:0,Class:20
2021-06-14 01:16:04.135 +00:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at Microsoft.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:49da4301-2ec6-4655-a7e9-67fa7c2b9ae3
Error Number:258,State:0,Class:20
2021-06-14 01:16:04.157 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.WaitForSSLHandShakeToComplete(UInt32& error)
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:49da4301-2ec6-4655-a7e9-67fa7c2b9ae3
Error Number:258,State:0,Class:20
2021-06-14 01:22:45.669 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-14 01:22:45.677 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-14 01:22:45.680 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-14 01:22:45.686 +00:00 [DBG] Start authorize request
2021-06-14 01:22:45.688 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 01:22:45.709 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 01:22:56.612 +00:00 [DBG] api-swagger found in database: true
2021-06-14 01:22:56.614 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 01:22:56.976 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 01:22:57.500 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 01:22:58.926 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 01:22:59.476 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 01:22:59.489 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 01:22:59.494 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"TW9uIEp1biAxNCAyMDIxIDAxOjIyOjQ1IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"0G-MZGqZjgZWeg6MVgDDnA","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"TW9uIEp1biAxNCAyMDIxIDAxOjIyOjQ1IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-14 01:23:01.690 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-14 01:23:01.697 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-14 01:23:01.712 +00:00 [DBG] Creating Implicit Flow response.
2021-06-14 01:23:01.722 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-14 01:23:01.727 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 01:23:03.826 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-14 01:23:03.842 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****n6Pg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9EHLVPPRJS:0000000F","TimeStamp":"2021-06-14T01:23:03.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5001","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-06-14 01:23:03.866 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"TW9uIEp1biAxNCAyMDIxIDAxOjIyOjQ1IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-14 01:23:40.166 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-14 01:23:40.175 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-14 01:23:40.181 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-14 01:23:40.191 +00:00 [DBG] Start discovery request
2021-06-14 01:23:42.497 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-14 01:23:43.035 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-14 01:23:43.041 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-14 01:23:43.051 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-14 01:23:43.057 +00:00 [DBG] Start key discovery request
2021-06-14 09:51:45.530 +00:00 [INF] Starting host...
2021-06-14 09:51:45.832 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-06-14 09:51:46.209 +00:00 [DBG] Custom IssuerUri set to http://psl-app-vm3/EBookkeepingAuth
2021-06-14 09:51:46.212 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-06-14 09:51:46.212 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-06-14 09:51:46.212 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-06-14 09:51:46.213 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-06-14 09:51:46.213 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-06-14 09:51:46.213 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-06-14 09:51:48.598 +00:00 [DBG] Login Url: /Account/Login
2021-06-14 09:51:48.601 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-06-14 09:51:48.603 +00:00 [DBG] Logout Url: /Account/Logout
2021-06-14 09:51:48.603 +00:00 [DBG] ConsentUrl Url: /consent
2021-06-14 09:51:48.604 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-06-14 09:51:48.606 +00:00 [DBG] Error Url: /home/error
2021-06-14 09:51:48.606 +00:00 [DBG] Error Id Parameter: errorId
2021-06-14 09:52:10.290 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-14 09:52:10.303 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-14 09:52:10.304 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-14 09:52:10.306 +00:00 [DBG] Start authorize request
2021-06-14 09:52:10.312 +00:00 [DBG] No user present in authorize request
2021-06-14 09:52:10.313 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 09:52:12.189 +00:00 [DBG] api-swagger found in database: true
2021-06-14 09:52:12.195 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 09:52:12.288 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:52:12.366 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:52:12.439 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:52:12.442 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:52:12.447 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 09:52:12.456 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"anonymous","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"TW9uIEp1biAxNCAyMDIxIDA5OjUyOjEwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"TW9uIEp1biAxNCAyMDIxIDA5OjUyOjEwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-14 09:52:12.466 +00:00 [INF] Showing login: User is not authenticated
2021-06-14 09:52:12.526 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 09:52:12.691 +00:00 [DBG] api-swagger found in database: true
2021-06-14 09:52:12.691 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 09:52:12.697 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:52:12.700 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:52:12.702 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:52:12.704 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:52:12.705 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 09:52:12.758 +00:00 [DBG] api-swagger found in database: true
2021-06-14 09:52:12.758 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 09:52:18.750 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 09:52:18.772 +00:00 [DBG] api-swagger found in database: true
2021-06-14 09:52:18.772 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 09:52:18.775 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:52:18.777 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:52:18.779 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:52:18.781 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:52:18.783 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 09:52:18.952 +00:00 [WRN] Invalid password for user 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32.
2021-06-14 09:52:18.954 +00:00 [WRN] User 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32 failed to provide the correct password.
2021-06-14 09:52:19.083 +00:00 [INF] {"Username":"paul.kodjo@persol.net","Endpoint":"UI","ClientId":"api-swagger","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM9F3839NKHR:00000017","TimeStamp":"2021-06-14T09:52:19.0000000Z","ProcessId":20736,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2021-06-14 09:52:19.088 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 09:52:19.102 +00:00 [DBG] api-swagger found in database: true
2021-06-14 09:52:19.103 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 09:52:19.105 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:52:19.107 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:52:19.110 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:52:19.112 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:52:19.113 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 09:52:19.125 +00:00 [DBG] api-swagger found in database: true
2021-06-14 09:52:19.125 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 09:52:28.172 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 09:52:28.195 +00:00 [DBG] api-swagger found in database: true
2021-06-14 09:52:28.195 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 09:52:28.198 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:52:28.202 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:52:28.205 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:52:28.207 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:52:28.208 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 09:52:28.280 +00:00 [DBG] Augmenting SignInContext
2021-06-14 09:52:28.281 +00:00 [DBG] Adding idp claim with value: local
2021-06-14 09:52:28.282 +00:00 [DBG] Adding auth_time claim with value: 1623664348
2021-06-14 09:52:28.290 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-06-14 09:52:28.294 +00:00 [INF] {"Username":"GHA-020202020-1","Provider":null,"ProviderUserId":null,"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"GHA-020202020-1","Endpoint":"UI","ClientId":"api-swagger","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM9F3839NKHR:00000019","TimeStamp":"2021-06-14T09:52:28.0000000Z","ProcessId":20736,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-06-14 09:52:28.316 +00:00 [DBG] api-swagger found in database: true
2021-06-14 09:52:28.317 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 09:52:28.342 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-06-14 09:52:28.344 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-06-14 09:52:28.344 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-06-14 09:52:28.347 +00:00 [DBG] Start authorize callback request
2021-06-14 09:52:28.349 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 09:52:28.349 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 09:52:28.363 +00:00 [DBG] api-swagger found in database: true
2021-06-14 09:52:28.363 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 09:52:28.365 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:52:28.367 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:52:28.369 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:52:28.372 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:52:28.373 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 09:52:28.375 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"TW9uIEp1biAxNCAyMDIxIDA5OjUyOjEwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"2xfoEpbRTrTgDrV4aZir1A","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"TW9uIEp1biAxNCAyMDIxIDA5OjUyOjEwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-14 09:52:28.417 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-14 09:52:28.433 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-14 09:52:28.436 +00:00 [DBG] Creating Implicit Flow response.
2021-06-14 09:52:28.444 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-14 09:52:28.445 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 09:52:28.459 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-14 09:52:28.615 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****6c3w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9F3839NKHR:0000001B","TimeStamp":"2021-06-14T09:52:28.0000000Z","ProcessId":20736,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-14 09:52:28.621 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"TW9uIEp1biAxNCAyMDIxIDA5OjUyOjEwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-14 09:52:28.630 +00:00 [DBG] Augmenting SignInContext
2021-06-14 09:52:28.631 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-06-14 09:52:40.320 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-14 09:52:40.323 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-14 09:52:40.324 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-14 09:52:40.326 +00:00 [DBG] Start discovery request
2021-06-14 09:52:40.398 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-14 09:52:40.513 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-14 09:52:40.514 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-14 09:52:40.515 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-14 09:52:40.518 +00:00 [DBG] Start key discovery request
2021-06-14 09:59:46.348 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-14 09:59:46.351 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-14 09:59:46.354 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-14 09:59:46.355 +00:00 [DBG] Start authorize request
2021-06-14 09:59:46.356 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 09:59:46.356 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 09:59:46.433 +00:00 [DBG] api-swagger found in database: true
2021-06-14 09:59:46.434 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 09:59:46.443 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:59:46.446 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:59:46.448 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 09:59:46.450 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 09:59:46.455 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 09:59:46.457 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"TW9uIEp1biAxNCAyMDIxIDA5OjU5OjQ2IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"2xfoEpbRTrTgDrV4aZir1A","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"TW9uIEp1biAxNCAyMDIxIDA5OjU5OjQ2IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-14 09:59:46.468 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-14 09:59:46.472 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-14 09:59:46.473 +00:00 [DBG] Creating Implicit Flow response.
2021-06-14 09:59:46.473 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-14 09:59:46.473 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 09:59:46.479 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-14 09:59:46.481 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****molg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9F3839NKHR:0000001D","TimeStamp":"2021-06-14T09:59:46.0000000Z","ProcessId":20736,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-14 09:59:46.488 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"TW9uIEp1biAxNCAyMDIxIDA5OjU5OjQ2IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-14 09:59:56.744 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-14 09:59:56.746 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-14 09:59:56.747 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-14 09:59:56.747 +00:00 [DBG] Start discovery request
2021-06-14 09:59:56.755 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-14 09:59:56.822 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-14 09:59:56.823 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-14 09:59:56.824 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-14 09:59:56.827 +00:00 [DBG] Start key discovery request
2021-06-14 10:09:13.285 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-14 10:09:13.290 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-14 10:09:13.290 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-14 10:09:13.292 +00:00 [DBG] Start authorize request
2021-06-14 10:09:13.293 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 10:09:13.294 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 10:09:13.445 +00:00 [DBG] api-swagger found in database: true
2021-06-14 10:09:13.445 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 10:09:13.449 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 10:09:13.473 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 10:09:13.493 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 10:09:13.496 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 10:09:13.497 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 10:09:13.497 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"TW9uIEp1biAxNCAyMDIxIDEwOjA5OjEzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"2xfoEpbRTrTgDrV4aZir1A","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"TW9uIEp1biAxNCAyMDIxIDEwOjA5OjEzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-14 10:09:13.504 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-14 10:09:13.508 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-14 10:09:13.508 +00:00 [DBG] Creating Implicit Flow response.
2021-06-14 10:09:13.508 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-14 10:09:13.509 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 10:09:13.514 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-14 10:09:13.517 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****TSYA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9F3839NKHR:0000001F","TimeStamp":"2021-06-14T10:09:13.0000000Z","ProcessId":20736,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-14 10:09:13.519 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"TW9uIEp1biAxNCAyMDIxIDEwOjA5OjEzIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-14 10:18:20.818 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-14 10:18:20.820 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-14 10:18:20.821 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-14 10:18:20.824 +00:00 [DBG] Start authorize request
2021-06-14 10:18:20.825 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 10:18:20.825 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 10:18:20.913 +00:00 [DBG] api-swagger found in database: true
2021-06-14 10:18:20.913 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 10:18:20.920 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 10:18:20.924 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 10:18:20.927 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 10:18:20.930 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 10:18:20.931 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 10:18:20.933 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"TW9uIEp1biAxNCAyMDIxIDEwOjE4OjIwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"2xfoEpbRTrTgDrV4aZir1A","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"TW9uIEp1biAxNCAyMDIxIDEwOjE4OjIwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-14 10:18:20.942 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-14 10:18:20.943 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-14 10:18:20.944 +00:00 [DBG] Creating Implicit Flow response.
2021-06-14 10:18:20.944 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-14 10:18:20.944 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 10:18:20.957 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-14 10:18:20.959 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****5rVA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9F3839NKHR:00000021","TimeStamp":"2021-06-14T10:18:20.0000000Z","ProcessId":20736,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-14 10:18:20.963 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"TW9uIEp1biAxNCAyMDIxIDEwOjE4OjIwIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-14 10:20:37.005 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-14 10:20:37.008 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-14 10:20:37.009 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-14 10:20:37.010 +00:00 [DBG] Start discovery request
2021-06-14 10:20:37.032 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-14 10:20:37.101 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-14 10:20:37.104 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-14 10:20:37.104 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-14 10:20:37.106 +00:00 [DBG] Start key discovery request
2021-06-14 10:23:32.096 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-14 10:23:32.098 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-14 10:23:32.098 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-14 10:23:32.099 +00:00 [DBG] Start authorize request
2021-06-14 10:23:32.099 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 10:23:32.100 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 10:23:32.116 +00:00 [DBG] api-swagger found in database: true
2021-06-14 10:23:32.117 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 10:23:32.119 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 10:23:32.123 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 10:23:32.129 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 10:23:32.131 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 10:23:32.132 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 10:23:32.132 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"TW9uIEp1biAxNCAyMDIxIDEwOjIzOjMyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"2xfoEpbRTrTgDrV4aZir1A","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"TW9uIEp1biAxNCAyMDIxIDEwOjIzOjMyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-14 10:23:32.145 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-14 10:23:32.146 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-14 10:23:32.147 +00:00 [DBG] Creating Implicit Flow response.
2021-06-14 10:23:32.147 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-14 10:23:32.147 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 10:23:32.152 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-14 10:23:32.155 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****PBvA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9F3839NKHR:00000023","TimeStamp":"2021-06-14T10:23:32.0000000Z","ProcessId":20736,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-14 10:23:32.158 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"TW9uIEp1biAxNCAyMDIxIDEwOjIzOjMyIEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-14 10:23:45.276 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-14 10:23:45.280 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-14 10:23:45.280 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-14 10:23:45.281 +00:00 [DBG] Start discovery request
2021-06-14 10:23:45.302 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-14 10:23:45.380 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-14 10:23:45.382 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-14 10:23:45.387 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-14 10:23:45.388 +00:00 [DBG] Start key discovery request
2021-06-14 10:25:39.954 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-14 10:25:39.956 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-14 10:25:39.957 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-14 10:25:39.957 +00:00 [DBG] Start authorize request
2021-06-14 10:25:39.958 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 10:25:39.958 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 10:25:39.990 +00:00 [DBG] api-swagger found in database: true
2021-06-14 10:25:39.990 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 10:25:39.993 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 10:25:39.998 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 10:25:40.002 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 10:25:40.004 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 10:25:40.004 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 10:25:40.005 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"TW9uIEp1biAxNCAyMDIxIDEwOjI1OjM5IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"2xfoEpbRTrTgDrV4aZir1A","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"TW9uIEp1biAxNCAyMDIxIDEwOjI1OjM5IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-14 10:25:40.017 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-14 10:25:40.035 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-14 10:25:40.035 +00:00 [DBG] Creating Implicit Flow response.
2021-06-14 10:25:40.035 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-14 10:25:40.036 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 10:25:40.063 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-14 10:25:40.065 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****R7uA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9F3839NKHR:00000025","TimeStamp":"2021-06-14T10:25:40.0000000Z","ProcessId":20736,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-14 10:25:40.068 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"TW9uIEp1biAxNCAyMDIxIDEwOjI1OjM5IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-14 10:25:56.622 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-14 10:25:56.624 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-14 10:25:56.625 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-14 10:25:56.626 +00:00 [DBG] Start discovery request
2021-06-14 10:25:56.632 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-14 10:25:56.711 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-14 10:25:56.712 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-14 10:25:56.713 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-14 10:25:56.714 +00:00 [DBG] Start key discovery request
2021-06-14 10:31:58.369 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-06-14 10:31:58.376 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-06-14 10:31:58.377 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-06-14 10:31:58.377 +00:00 [DBG] Start authorize request
2021-06-14 10:31:58.378 +00:00 [DBG] User in authorize request: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 10:31:58.379 +00:00 [DBG] Start authorize request protocol validation
2021-06-14 10:31:58.452 +00:00 [DBG] api-swagger found in database: true
2021-06-14 10:31:58.453 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-06-14 10:31:58.463 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 10:31:58.466 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 10:31:58.468 +00:00 [DBG] Found [] identity scopes in database
2021-06-14 10:31:58.471 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-06-14 10:31:58.472 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-06-14 10:31:58.473 +00:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","AllowedRedirectUris":["https://localhost:44363/api-docs/oauth2-redirect.html","https://psl-app-vm3/ebookkeepingapi/api-docs/oauth2-redirect.html"],"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"ebookkeeping-api","State":"TW9uIEp1biAxNCAyMDIxIDEwOjMxOjU4IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"2xfoEpbRTrTgDrV4aZir1A","Raw":{"response_type":"token","client_id":"api-swagger","redirect_uri":"https://localhost:44363/api-docs/oauth2-redirect.html","scope":"ebookkeeping-api","state":"TW9uIEp1biAxNCAyMDIxIDEwOjMxOjU4IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","realm":""},"$type":"AuthorizeRequestValidationLog"}
2021-06-14 10:31:58.480 +00:00 [DBG] o4wshaAs5cjl/eoiHAd0P8Hi8kXlnO8yNFj8dHWl+hw= found in database: true
2021-06-14 10:31:58.484 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2021-06-14 10:31:58.484 +00:00 [DBG] Creating Implicit Flow response.
2021-06-14 10:31:58.485 +00:00 [DBG] Getting claims for access token for client: api-swagger
2021-06-14 10:31:58.485 +00:00 [DBG] Getting claims for access token for subject: 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-06-14 10:31:58.493 +00:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2021-06-14 10:31:58.494 +00:00 [INF] {"ClientId":"api-swagger","ClientName":"Swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","Endpoint":"Authorize","SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","Scopes":"ebookkeeping-api","GrantType":"implicit","Tokens":[{"TokenType":"access_token","TokenValue":"****MnPA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM9F3839NKHR:00000027","TimeStamp":"2021-06-14T10:31:58.0000000Z","ProcessId":20736,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-06-14 10:31:58.499 +00:00 [DBG] Authorize endpoint response
{"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","RedirectUri":"https://localhost:44363/api-docs/oauth2-redirect.html","State":"TW9uIEp1biAxNCAyMDIxIDEwOjMxOjU4IEdNVCswMDAwIChHcmVlbndpY2ggTWVhbiBUaW1lKQ==","Scope":"ebookkeeping-api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-06-14 10:33:28.148 +00:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-06-14 10:33:28.150 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-06-14 10:33:28.153 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-06-14 10:33:28.155 +00:00 [DBG] Start discovery request
2021-06-14 10:33:28.163 +00:00 [DBG] Found ["phone","email","profile","openid","ebookkeeping-api3","ebookkeeping-api2","ebookkeeping-api"] as all scopes in database
2021-06-14 10:33:28.295 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-06-14 10:33:28.299 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-06-14 10:33:28.300 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-06-14 10:33:28.301 +00:00 [DBG] Start key discovery request
2021-06-14 10:51:45.810 +00:00 [INF] Removing 0 grants
2021-06-14 10:51:45.851 +00:00 [INF] Removing 0 device flow codes
2021-06-14 11:51:45.921 +00:00 [INF] Removing 0 grants
2021-06-14 11:51:45.924 +00:00 [INF] Removing 0 device flow codes
2021-06-14 12:51:47.171 +00:00 [INF] Removing 0 grants
2021-06-14 12:51:47.174 +00:00 [INF] Removing 0 device flow codes
2021-06-14 13:51:48.416 +00:00 [INF] Removing 0 grants
2021-06-14 13:51:48.474 +00:00 [INF] Removing 0 device flow codes
2021-08-18 12:35:31.877 +00:00 [INF] Starting host...
2021-08-18 12:35:32.692 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-08-18 12:35:33.104 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-08-18 12:35:33.107 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-08-18 12:35:33.108 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-08-18 12:35:33.108 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-08-18 12:35:33.108 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-08-18 12:35:33.110 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-08-18 12:35:33.110 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-08-18 12:35:46.380 +00:00 [DBG] Login Url: /Account/Login
2021-08-18 12:35:46.382 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-08-18 12:35:46.384 +00:00 [DBG] Logout Url: /Account/Logout
2021-08-18 12:35:46.384 +00:00 [DBG] ConsentUrl Url: /consent
2021-08-18 12:35:46.385 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-08-18 12:35:46.385 +00:00 [DBG] Error Url: /home/error
2021-08-18 12:35:46.385 +00:00 [DBG] Error Id Parameter: errorId
2021-08-27 11:05:36.330 +00:00 [INF] Starting host...
2021-08-27 11:05:37.258 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-08-27 11:05:37.372 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-08-27 11:05:37.375 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-08-27 11:05:37.376 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-08-27 11:05:37.376 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-08-27 11:05:37.376 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-08-27 11:05:37.376 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-08-27 11:05:37.377 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-08-27 11:05:49.000 +00:00 [DBG] Login Url: /Account/Login
2021-08-27 11:05:49.001 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-08-27 11:05:49.003 +00:00 [DBG] Logout Url: /Account/Logout
2021-08-27 11:05:49.003 +00:00 [DBG] ConsentUrl Url: /consent
2021-08-27 11:05:49.003 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-08-27 11:05:49.004 +00:00 [DBG] Error Url: /home/error
2021-08-27 11:05:49.004 +00:00 [DBG] Error Id Parameter: errorId
2021-08-27 11:06:12.780 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-08-27 11:06:34.122 +00:00 [WRN] Invalid password for user 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32.
2021-08-27 11:06:34.124 +00:00 [WRN] User 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32 failed to provide the correct password.
2021-08-27 11:06:34.258 +00:00 [INF] {"Username":"paul.kodjo@persol.net","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HMB99AD5JOH8:00000019","TimeStamp":"2021-08-27T11:06:34.0000000Z","ProcessId":101660,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2021-08-27 11:06:43.436 +00:00 [WRN] Invalid password for user 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32.
2021-08-27 11:06:43.437 +00:00 [WRN] User 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32 failed to provide the correct password.
2021-08-27 11:06:43.446 +00:00 [INF] {"Username":"paul.kodjo@persol.net","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HMB99AD5JOH8:0000001B","TimeStamp":"2021-08-27T11:06:43.0000000Z","ProcessId":101660,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2021-08-27 11:06:51.867 +00:00 [DBG] Augmenting SignInContext
2021-08-27 11:06:51.868 +00:00 [DBG] Adding idp claim with value: local
2021-08-27 11:06:51.869 +00:00 [DBG] Adding auth_time claim with value: 1630062411
2021-08-27 11:06:51.874 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-08-27 11:06:51.879 +00:00 [INF] {"Username":"GHA-020202020-1","Provider":null,"ProviderUserId":null,"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"GHA-020202020-1","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMB99AD5JOH8:0000001D","TimeStamp":"2021-08-27T11:06:51.0000000Z","ProcessId":101660,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-08-27 11:06:52.005 +00:00 [DBG] 2 persisted grants found for 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-08-27 11:06:52.497 +00:00 [DBG] api-swagger found in database: true
2021-08-27 11:06:52.524 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-08-27 11:06:52.573 +00:00 [DBG] Found [] identity scopes in database
2021-08-27 11:06:52.658 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-08-27 11:06:52.697 +00:00 [DBG] ebookkeeping-pwa found in database: true
2021-08-27 11:06:52.699 +00:00 [DBG] client configuration validation for client ebookkeeping-pwa succeeded.
2021-08-27 11:06:52.706 +00:00 [DBG] Found ["profile","openid"] identity scopes in database
2021-08-27 11:06:52.739 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-08-30 12:59:16.554 +00:00 [INF] Starting host...
2021-08-30 12:59:17.314 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-08-30 12:59:17.637 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-08-30 12:59:17.639 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-08-30 12:59:17.640 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-08-30 12:59:17.640 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-08-30 12:59:17.640 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-08-30 12:59:17.641 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-08-30 12:59:17.641 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-08-30 12:59:27.217 +00:00 [DBG] Login Url: /Account/Login
2021-08-30 12:59:27.218 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-08-30 12:59:27.219 +00:00 [DBG] Logout Url: /Account/Logout
2021-08-30 12:59:27.220 +00:00 [DBG] ConsentUrl Url: /consent
2021-08-30 12:59:27.220 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-08-30 12:59:27.221 +00:00 [DBG] Error Url: /home/error
2021-08-30 12:59:27.221 +00:00 [DBG] Error Id Parameter: errorId
2021-08-30 13:02:42.464 +00:00 [DBG] 2 persisted grants found for 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-08-30 13:02:43.160 +00:00 [DBG] api-swagger found in database: true
2021-08-30 13:02:43.165 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-08-30 13:02:43.277 +00:00 [DBG] Found [] identity scopes in database
2021-08-30 13:02:43.387 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-08-30 13:02:43.558 +00:00 [DBG] ebookkeeping-pwa found in database: true
2021-08-30 13:02:43.559 +00:00 [DBG] client configuration validation for client ebookkeeping-pwa succeeded.
2021-08-30 13:02:43.599 +00:00 [DBG] Found ["profile","openid"] identity scopes in database
2021-08-30 13:02:43.636 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-08-30 13:02:56.954 +00:00 [DBG] 2 persisted grants found for 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-08-30 13:02:56.970 +00:00 [DBG] api-swagger found in database: true
2021-08-30 13:02:56.971 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-08-30 13:02:56.973 +00:00 [DBG] Found [] identity scopes in database
2021-08-30 13:02:56.975 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-08-30 13:02:56.990 +00:00 [DBG] ebookkeeping-pwa found in database: true
2021-08-30 13:02:56.991 +00:00 [DBG] client configuration validation for client ebookkeeping-pwa succeeded.
2021-08-30 13:02:56.993 +00:00 [DBG] Found ["profile","openid"] identity scopes in database
2021-08-30 13:02:56.996 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-08-30 13:03:36.842 +00:00 [DBG] 2 persisted grants found for 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-08-30 13:03:36.860 +00:00 [DBG] api-swagger found in database: true
2021-08-30 13:03:36.861 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-08-30 13:03:36.863 +00:00 [DBG] Found [] identity scopes in database
2021-08-30 13:03:36.866 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-08-30 13:03:36.881 +00:00 [DBG] ebookkeeping-pwa found in database: true
2021-08-30 13:03:36.881 +00:00 [DBG] client configuration validation for client ebookkeeping-pwa succeeded.
2021-08-30 13:03:36.884 +00:00 [DBG] Found ["profile","openid"] identity scopes in database
2021-08-30 13:03:36.887 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-08-30 13:03:40.101 +00:00 [DBG] removing 1 persisted grants from database for subject 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32, clientId ebookkeeping-pwa
2021-08-30 13:03:40.202 +00:00 [INF] {"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"ebookkeeping-pwa","Category":"Grants","Name":"Grants revoked","EventType":"Information","Id":4002,"Message":null,"ActivityId":"0HMBBMNTHNRCB:00000011","TimeStamp":"2021-08-30T13:03:40.0000000Z","ProcessId":6828,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"GrantsRevokedEvent"}
2021-08-30 13:03:40.268 +00:00 [DBG] 1 persisted grants found for 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-08-30 13:03:40.291 +00:00 [DBG] api-swagger found in database: true
2021-08-30 13:03:40.292 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-08-30 13:03:40.293 +00:00 [DBG] Found [] identity scopes in database
2021-08-30 13:03:40.296 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-08-30 13:03:43.382 +00:00 [DBG] removing 1 persisted grants from database for subject 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32, clientId api-swagger
2021-08-30 13:03:43.390 +00:00 [INF] {"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","ClientId":"api-swagger","Category":"Grants","Name":"Grants revoked","EventType":"Information","Id":4002,"Message":null,"ActivityId":"0HMBBMNTHNRCB:00000015","TimeStamp":"2021-08-30T13:03:43.0000000Z","ProcessId":6828,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"GrantsRevokedEvent"}
2021-08-30 13:03:43.441 +00:00 [DBG] 0 persisted grants found for 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-08-30 13:03:47.534 +00:00 [DBG] 0 persisted grants found for 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-08-30 13:03:53.097 +00:00 [DBG] 0 persisted grants found for 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-08-30 13:05:03.448 +00:00 [DBG] 0 persisted grants found for 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-08-30 13:06:32.225 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-08-30 13:06:32.227 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-08-30 13:06:32.228 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-08-30 13:06:32.229 +00:00 [INF] {"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"System Admin","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HMBBMNTHNRCB:00000027","TimeStamp":"2021-08-30T13:06:32.0000000Z","ProcessId":6828,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2021-08-30 13:07:15.285 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-08-30 13:11:29.676 +00:00 [INF] Starting host...
2021-08-30 13:11:29.833 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-08-30 13:11:29.931 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-08-30 13:11:29.935 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-08-30 13:11:29.935 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-08-30 13:11:29.935 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-08-30 13:11:29.936 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-08-30 13:11:29.936 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-08-30 13:11:29.936 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-08-30 13:11:33.831 +00:00 [DBG] Login Url: /Account/Login
2021-08-30 13:11:33.832 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-08-30 13:11:33.833 +00:00 [DBG] Logout Url: /Account/Logout
2021-08-30 13:11:33.834 +00:00 [DBG] ConsentUrl Url: /consent
2021-08-30 13:11:33.834 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-08-30 13:11:33.836 +00:00 [DBG] Error Url: /home/error
2021-08-30 13:11:33.838 +00:00 [DBG] Error Id Parameter: errorId
2021-08-30 13:11:37.699 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-08-30 13:13:36.327 +00:00 [WRN] Invalid password for user 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32.
2021-08-30 13:13:36.329 +00:00 [WRN] User 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32 failed to provide the correct password.
2021-08-30 13:13:36.440 +00:00 [INF] {"Username":"0205429916","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HMBBMUNELGDS:00000007","TimeStamp":"2021-08-30T13:13:36.0000000Z","ProcessId":116992,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2021-08-30 13:13:56.770 +00:00 [DBG] Augmenting SignInContext
2021-08-30 13:13:56.771 +00:00 [DBG] Adding idp claim with value: local
2021-08-30 13:13:56.772 +00:00 [DBG] Adding auth_time claim with value: 1630329236
2021-08-30 13:13:56.779 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-08-30 13:13:56.783 +00:00 [INF] {"Username":"GHA-020202020-1","Provider":null,"ProviderUserId":null,"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"GHA-020202020-1","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMBBMUNELGDS:00000009","TimeStamp":"2021-08-30T13:13:56.0000000Z","ProcessId":116992,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-08-30 13:13:56.827 +00:00 [DBG] 0 persisted grants found for 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-08-30 13:14:17.210 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-08-30 13:14:17.212 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-08-30 13:14:17.213 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-08-30 13:14:17.214 +00:00 [INF] {"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"System Admin","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HMBBMUNELGDS:0000000F","TimeStamp":"2021-08-30T13:14:17.0000000Z","ProcessId":116992,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2021-08-30 13:14:37.199 +00:00 [DBG] Augmenting SignInContext
2021-08-30 13:14:37.199 +00:00 [DBG] Adding idp claim with value: local
2021-08-30 13:14:37.200 +00:00 [DBG] Adding auth_time claim with value: 1630329277
2021-08-30 13:14:37.201 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-08-30 13:14:37.203 +00:00 [INF] {"Username":"GHA-020202020-1","Provider":null,"ProviderUserId":null,"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"GHA-020202020-1","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMBBMUNELGDS:00000013","TimeStamp":"2021-08-30T13:14:37.0000000Z","ProcessId":116992,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-08-30 13:14:45.660 +00:00 [DBG] 0 persisted grants found for 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-08-30 13:14:57.058 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-08-30 13:14:57.060 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-08-30 13:14:57.061 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-08-30 13:14:57.062 +00:00 [INF] {"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"System Admin","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HMBBMUNELGDS:0000001B","TimeStamp":"2021-08-30T13:14:57.0000000Z","ProcessId":116992,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2021-08-30 13:15:40.186 +00:00 [DBG] Augmenting SignInContext
2021-08-30 13:15:40.187 +00:00 [DBG] Adding idp claim with value: local
2021-08-30 13:15:40.188 +00:00 [DBG] Adding auth_time claim with value: 1630329340
2021-08-30 13:15:40.189 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-08-30 13:15:40.192 +00:00 [INF] {"Username":"GHA-020202020-1","Provider":null,"ProviderUserId":null,"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"GHA-020202020-1","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMBBMUNELGDS:0000001F","TimeStamp":"2021-08-30T13:15:40.0000000Z","ProcessId":116992,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-08-30 13:23:17.069 +00:00 [INF] Starting host...
2021-08-30 13:23:17.220 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-08-30 13:23:17.338 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-08-30 13:23:17.341 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-08-30 13:23:17.341 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-08-30 13:23:17.341 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-08-30 13:23:17.342 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-08-30 13:23:17.342 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-08-30 13:23:17.342 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-08-30 13:23:22.217 +00:00 [DBG] Login Url: /Account/Login
2021-08-30 13:23:22.219 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-08-30 13:23:22.221 +00:00 [DBG] Logout Url: /Account/Logout
2021-08-30 13:23:22.221 +00:00 [DBG] ConsentUrl Url: /consent
2021-08-30 13:23:22.222 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-08-30 13:23:22.222 +00:00 [DBG] Error Url: /home/error
2021-08-30 13:23:22.222 +00:00 [DBG] Error Id Parameter: errorId
2021-08-30 13:23:29.389 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-08-30 13:23:29.392 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-08-30 13:23:29.393 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-08-30 13:23:29.413 +00:00 [INF] {"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"System Admin","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HMBBN5A8MQL9:00000005","TimeStamp":"2021-08-30T13:23:29.0000000Z","ProcessId":26380,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2021-09-02 09:17:17.884 +00:00 [INF] Starting host...
2021-09-02 09:17:18.982 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 09:17:19.402 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 09:17:19.405 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 09:17:19.405 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 09:17:19.405 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 09:17:19.405 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 09:17:19.406 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 09:17:19.406 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 09:17:37.473 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 09:17:37.523 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 09:17:37.528 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 09:17:37.537 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 09:17:37.539 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 09:17:37.539 +00:00 [DBG] Error Url: /home/error
2021-09-02 09:17:37.540 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 09:17:54.624 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-02 09:18:43.598 +00:00 [DBG] Augmenting SignInContext
2021-09-02 09:18:43.599 +00:00 [DBG] Adding idp claim with value: local
2021-09-02 09:18:43.600 +00:00 [DBG] Adding auth_time claim with value: 1630574323
2021-09-02 09:18:43.606 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-09-02 09:18:43.619 +00:00 [INF] {"Username":"GHA-020202020-1","Provider":null,"ProviderUserId":null,"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"GHA-020202020-1","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMBDU9SLDCIN:00000019","TimeStamp":"2021-09-02T09:18:43.0000000Z","ProcessId":101256,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-09-02 09:18:43.809 +00:00 [DBG] 1 persisted grants found for 2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32
2021-09-02 09:18:44.337 +00:00 [DBG] api-swagger found in database: true
2021-09-02 09:18:44.342 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-09-02 09:18:44.407 +00:00 [DBG] Found [] identity scopes in database
2021-09-02 09:18:44.497 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-09-02 09:19:31.820 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-09-02 09:19:31.821 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-09-02 09:19:31.822 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-09-02 09:19:31.823 +00:00 [INF] {"SubjectId":"2EBC9CA6-A0BB-4383-BF25-5EEA240C3B32","DisplayName":"System Admin","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HMBDU9SLDCIN:00000023","TimeStamp":"2021-09-02T09:19:31.0000000Z","ProcessId":101256,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2021-09-02 09:22:47.153 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-02 09:29:03.381 +00:00 [INF] Starting host...
2021-09-02 09:29:03.560 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 09:29:03.665 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 09:29:03.668 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 09:29:03.668 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 09:29:03.669 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 09:29:03.669 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 09:29:03.669 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 09:29:03.670 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 09:29:06.144 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 09:29:06.146 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 09:29:06.147 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 09:29:06.147 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 09:29:06.147 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 09:29:06.148 +00:00 [DBG] Error Url: /home/error
2021-09-02 09:29:06.148 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 09:38:15.428 +00:00 [INF] Starting host...
2021-09-02 09:38:15.588 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 09:38:15.698 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 09:38:15.701 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 09:38:15.701 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 09:38:15.701 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 09:38:15.702 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 09:38:15.702 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 09:38:15.702 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 09:38:17.614 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 09:38:17.615 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 09:38:17.616 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 09:38:17.616 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 09:38:17.616 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 09:38:17.616 +00:00 [DBG] Error Url: /home/error
2021-09-02 09:38:17.616 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 10:26:10.538 +00:00 [FTL] Host terminated unexpectedly.
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: EBookkeepingAuth.Services.IEbookkeepingUserManager Lifetime: Scoped ImplementationType: EBookkeepingAuth.Services.EbookkeepingUserManager': Unable to resolve service for type 'EBookkeepingAuth.Data.CompanyContext.EbookkeepingApplicationContext' while attempting to activate 'EBookkeepingAuth.Services.EbookkeepingUserManager'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: EBookkeepingAuth.Services.IEbookkeepingUserManager Lifetime: Scoped ImplementationType: EBookkeepingAuth.Services.EbookkeepingUserManager': Unable to resolve service for type 'EBookkeepingAuth.Data.CompanyContext.EbookkeepingApplicationContext' while attempting to activate 'EBookkeepingAuth.Services.EbookkeepingUserManager'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'EBookkeepingAuth.Data.CompanyContext.EbookkeepingApplicationContext' while attempting to activate 'EBookkeepingAuth.Services.EbookkeepingUserManager'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, Type serviceType, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.DefaultServiceProviderFactory.CreateServiceProvider(IServiceCollection containerBuilder)
   at Microsoft.Extensions.Hosting.Internal.ServiceFactoryAdapter`1.CreateServiceProvider(Object containerBuilder)
   at Microsoft.Extensions.Hosting.HostBuilder.CreateServiceProvider()
   at Microsoft.Extensions.Hosting.HostBuilder.Build()
   at EBookkeepingAuth.Program.Main(String[] args) in C:\Users\plawer\source\EBookKeepingRepos\EBookkeeping Auth - master\EBookkeepingAuth\Program.cs:line 36
2021-09-02 10:28:35.801 +00:00 [FTL] Host terminated unexpectedly.
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: EBookkeepingAuth.Services.IEbookkeepingUserManager Lifetime: Scoped ImplementationType: EBookkeepingAuth.Services.EbookkeepingUserManager': Unable to resolve service for type 'EBookkeepingAuth.Data.CompanyContext.EbookkeepingApplicationContext' while attempting to activate 'EBookkeepingAuth.Services.EbookkeepingUserManager'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: EBookkeepingAuth.Services.IEbookkeepingUserManager Lifetime: Scoped ImplementationType: EBookkeepingAuth.Services.EbookkeepingUserManager': Unable to resolve service for type 'EBookkeepingAuth.Data.CompanyContext.EbookkeepingApplicationContext' while attempting to activate 'EBookkeepingAuth.Services.EbookkeepingUserManager'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'EBookkeepingAuth.Data.CompanyContext.EbookkeepingApplicationContext' while attempting to activate 'EBookkeepingAuth.Services.EbookkeepingUserManager'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, Type serviceType, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.DefaultServiceProviderFactory.CreateServiceProvider(IServiceCollection containerBuilder)
   at Microsoft.Extensions.Hosting.Internal.ServiceFactoryAdapter`1.CreateServiceProvider(Object containerBuilder)
   at Microsoft.Extensions.Hosting.HostBuilder.CreateServiceProvider()
   at Microsoft.Extensions.Hosting.HostBuilder.Build()
   at EBookkeepingAuth.Program.Main(String[] args) in C:\Users\plawer\source\EBookKeepingRepos\EBookkeeping Auth - master\EBookkeepingAuth\Program.cs:line 36
2021-09-02 10:36:45.477 +00:00 [FTL] Host terminated unexpectedly.
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: EBookkeepingAuth.Services.IEbookkeepingUserManager Lifetime: Scoped ImplementationType: EBookkeepingAuth.Services.EbookkeepingUserManager': Unable to resolve service for type 'EBookkeepingAuth.Data.CompanyContext.EbookkeepingApplicationContext' while attempting to activate 'EBookkeepingAuth.Services.EbookkeepingUserManager'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: EBookkeepingAuth.Services.IEbookkeepingUserManager Lifetime: Scoped ImplementationType: EBookkeepingAuth.Services.EbookkeepingUserManager': Unable to resolve service for type 'EBookkeepingAuth.Data.CompanyContext.EbookkeepingApplicationContext' while attempting to activate 'EBookkeepingAuth.Services.EbookkeepingUserManager'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'EBookkeepingAuth.Data.CompanyContext.EbookkeepingApplicationContext' while attempting to activate 'EBookkeepingAuth.Services.EbookkeepingUserManager'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, Type serviceType, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.DefaultServiceProviderFactory.CreateServiceProvider(IServiceCollection containerBuilder)
   at Microsoft.Extensions.Hosting.Internal.ServiceFactoryAdapter`1.CreateServiceProvider(Object containerBuilder)
   at Microsoft.Extensions.Hosting.HostBuilder.CreateServiceProvider()
   at Microsoft.Extensions.Hosting.HostBuilder.Build()
   at EBookkeepingAuth.Program.Main(String[] args) in C:\Users\plawer\source\EBookKeepingRepos\EBookkeeping Auth - master\EBookkeepingAuth\Program.cs:line 36
2021-09-02 10:38:15.242 +00:00 [INF] Starting host...
2021-09-02 10:38:15.703 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 10:38:15.835 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 10:38:15.851 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 10:38:15.852 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 10:38:15.852 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 10:38:15.852 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 10:38:15.852 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 10:38:15.853 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 10:38:22.032 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 10:38:22.035 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 10:38:22.039 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 10:38:22.039 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 10:38:22.047 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 10:38:22.047 +00:00 [DBG] Error Url: /home/error
2021-09-02 10:38:22.048 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 10:42:03.099 +00:00 [INF] User created a new account with password.
2021-09-02 10:45:56.411 +00:00 [INF] Starting host...
2021-09-02 10:45:56.549 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 10:45:56.663 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 10:45:56.666 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 10:45:56.666 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 10:45:56.666 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 10:45:56.666 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 10:45:56.667 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 10:45:56.667 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 10:46:00.383 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 10:46:00.384 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 10:46:00.385 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 10:46:00.386 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 10:46:00.386 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 10:46:00.386 +00:00 [DBG] Error Url: /home/error
2021-09-02 10:46:00.387 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 10:48:46.963 +00:00 [INF] User created a new account with password.
2021-09-02 10:48:59.704 +00:00 [DBG] Augmenting SignInContext
2021-09-02 10:48:59.705 +00:00 [DBG] Adding idp claim with value: local
2021-09-02 10:48:59.706 +00:00 [DBG] Adding amr claim with value: pwd
2021-09-02 10:48:59.706 +00:00 [DBG] Adding auth_time claim with value: 1630579739
2021-09-02 10:48:59.754 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-09-02 10:53:27.802 +00:00 [INF] Starting host...
2021-09-02 10:53:27.977 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 10:53:28.104 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 10:53:28.109 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 10:53:28.175 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 10:53:28.215 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 10:53:28.217 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 10:53:28.222 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 10:53:28.223 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 10:53:30.293 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 10:53:30.294 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 10:53:30.296 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 10:53:30.296 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 10:53:30.297 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 10:53:30.297 +00:00 [DBG] Error Url: /home/error
2021-09-02 10:53:30.297 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 10:56:08.317 +00:00 [INF] User created a new account with password.
2021-09-02 10:57:24.818 +00:00 [DBG] Augmenting SignInContext
2021-09-02 10:57:24.819 +00:00 [DBG] Adding idp claim with value: local
2021-09-02 10:57:24.820 +00:00 [DBG] Adding amr claim with value: pwd
2021-09-02 10:57:24.821 +00:00 [DBG] Adding auth_time claim with value: 1630580244
2021-09-02 10:57:24.830 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-09-02 11:01:32.629 +00:00 [INF] Starting host...
2021-09-02 11:01:32.783 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 11:01:32.883 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 11:01:32.886 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 11:01:32.886 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 11:01:32.886 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 11:01:32.886 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 11:01:32.886 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 11:01:32.886 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 11:01:34.938 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 11:01:34.941 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 11:01:34.942 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 11:01:34.943 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 11:01:34.943 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 11:01:34.944 +00:00 [DBG] Error Url: /home/error
2021-09-02 11:01:34.944 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 11:04:10.988 +00:00 [INF] User created a new account with password.
2021-09-02 11:06:16.112 +00:00 [DBG] Augmenting SignInContext
2021-09-02 11:06:16.113 +00:00 [DBG] Adding idp claim with value: local
2021-09-02 11:06:16.114 +00:00 [DBG] Adding amr claim with value: pwd
2021-09-02 11:06:16.114 +00:00 [DBG] Adding auth_time claim with value: 1630580776
2021-09-02 11:06:16.122 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-09-02 11:07:11.104 +00:00 [INF] Starting host...
2021-09-02 11:07:11.270 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 11:07:11.376 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 11:07:11.378 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 11:07:11.379 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 11:07:11.379 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 11:07:11.379 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 11:07:11.380 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 11:07:11.380 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 11:07:13.284 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 11:07:13.285 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 11:07:13.286 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 11:07:13.287 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 11:07:13.287 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 11:07:13.288 +00:00 [DBG] Error Url: /home/error
2021-09-02 11:07:13.288 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 11:12:08.047 +00:00 [INF] User created a new account with password.
2021-09-02 11:12:26.222 +00:00 [ERR] Failed executing DbCommand (42ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Guid), @p2='?' (DbType = Boolean), @p3='?' (Size = 1) (DbType = AnsiString), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [CompanyAssociation] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0)) AS i ([AssociatedUserID], [CompanyID], [IsAdmin], [Status], [UserID], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AssociatedUserID], [CompanyID], [IsAdmin], [Status], [UserID])
VALUES (i.[AssociatedUserID], i.[CompanyID], i.[IsAdmin], i.[Status], i.[UserID])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[DateCreated], [t].[DateModified] FROM [CompanyAssociation] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];
2021-09-02 11:12:26.328 +00:00 [ERR] An exception occurred in the database while saving changes for context type 'EBookkeepingAuth.Data.CompanyContext.EbookkeepingApplicationContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'AssociatedUserID', table 'Ebookkeeping.Application.dbo.CompanyAssociation'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:234365e4-56a5-4ba8-bb94-c0b2c1505ece
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'AssociatedUserID', table 'Ebookkeeping.Application.dbo.CompanyAssociation'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:234365e4-56a5-4ba8-bb94-c0b2c1505ece
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2021-09-02 11:12:26.703 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'AssociatedUserID', table 'Ebookkeeping.Application.dbo.CompanyAssociation'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:234365e4-56a5-4ba8-bb94-c0b2c1505ece
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at EBookkeepingAuth.Services.EbookkeepingUserManager.AddCompanyAssociationAsync(CompanyAssociation companyAssociation) in C:\Users\plawer\source\EBookKeepingRepos\EBookkeeping Auth - master\EBookkeepingAuth\Services\IEbookkeepingUserManager.cs:line 33
   at EBookkeepingAuth.Areas.Identity.Pages.Account.RegisterModel.OnPostAsync(String returnUrl) in C:\Users\plawer\source\EBookKeepingRepos\EBookkeeping Auth - master\EBookkeepingAuth\Areas\Identity\Pages\Account\Register.cshtml.cs:line 211
   at Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.ExecutorFactory.GenericTaskHandlerMethod.Convert[T](Object taskAsObject)
   at Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.ExecutorFactory.GenericTaskHandlerMethod.Execute(Object receiver, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker.InvokeHandlerMethodAsync()
   at Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker.InvokeNextPageFilterAsync()
   at Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker.Rethrow(PageHandlerExecutedContext context)
   at Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2021-09-02 11:20:31.375 +00:00 [INF] Starting host...
2021-09-02 11:20:31.531 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 11:20:31.633 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 11:20:31.636 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 11:20:31.636 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 11:20:31.637 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 11:20:31.637 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 11:20:31.637 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 11:20:31.638 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 11:20:33.562 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 11:20:33.564 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 11:20:33.565 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 11:20:33.565 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 11:20:33.566 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 11:20:33.566 +00:00 [DBG] Error Url: /home/error
2021-09-02 11:20:33.567 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 11:23:33.208 +00:00 [INF] User created a new account with password.
2021-09-02 11:23:51.055 +00:00 [DBG] Augmenting SignInContext
2021-09-02 11:23:51.056 +00:00 [DBG] Adding idp claim with value: local
2021-09-02 11:23:51.057 +00:00 [DBG] Adding amr claim with value: pwd
2021-09-02 11:23:51.057 +00:00 [DBG] Adding auth_time claim with value: 1630581831
2021-09-02 11:23:51.069 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-09-02 14:38:33.284 +00:00 [INF] Starting host...
2021-09-02 14:38:33.477 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 14:38:33.812 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 14:38:33.815 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 14:38:33.816 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 14:38:33.816 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 14:38:33.816 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 14:38:33.816 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 14:38:33.816 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 14:38:37.055 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 14:38:37.057 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 14:38:37.058 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 14:38:37.059 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 14:38:37.059 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 14:38:37.059 +00:00 [DBG] Error Url: /home/error
2021-09-02 14:38:37.060 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 15:25:23.559 +00:00 [INF] Starting host...
2021-09-02 15:25:23.652 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 15:25:23.736 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 15:25:23.739 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 15:25:23.740 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 15:25:23.740 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 15:25:23.740 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 15:25:23.741 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 15:25:23.741 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 15:25:24.940 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 15:25:24.944 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 15:25:24.944 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 15:25:24.945 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 15:25:24.945 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 15:25:24.945 +00:00 [DBG] Error Url: /home/error
2021-09-02 15:25:24.947 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 15:33:13.388 +00:00 [INF] Starting host...
2021-09-02 15:33:13.472 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 15:33:13.560 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 15:33:13.564 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 15:33:13.565 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 15:33:13.565 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 15:33:13.565 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 15:33:13.565 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 15:33:13.565 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 15:33:14.579 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 15:33:14.581 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 15:33:14.582 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 15:33:14.582 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 15:33:14.582 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 15:33:14.583 +00:00 [DBG] Error Url: /home/error
2021-09-02 15:33:14.583 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 15:37:17.555 +00:00 [INF] Starting host...
2021-09-02 15:37:17.644 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 15:37:17.730 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 15:37:17.733 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 15:37:17.734 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 15:37:17.734 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 15:37:17.734 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 15:37:17.735 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 15:37:17.735 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 15:37:18.685 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 15:37:18.686 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 15:37:18.689 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 15:37:18.689 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 15:37:18.690 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 15:37:18.691 +00:00 [DBG] Error Url: /home/error
2021-09-02 15:37:18.691 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 16:03:28.702 +00:00 [INF] Starting host...
2021-09-02 16:03:28.785 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 16:03:28.871 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 16:03:28.874 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 16:03:28.874 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 16:03:28.875 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 16:03:28.875 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 16:03:28.875 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 16:03:28.876 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 16:03:29.878 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 16:03:29.880 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 16:03:29.881 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 16:03:29.881 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 16:03:29.881 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 16:03:29.881 +00:00 [DBG] Error Url: /home/error
2021-09-02 16:03:29.882 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 16:10:03.123 +00:00 [INF] Starting host...
2021-09-02 16:10:03.204 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 16:10:03.288 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 16:10:03.292 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 16:10:03.292 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 16:10:03.292 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 16:10:03.292 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 16:10:03.293 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 16:10:03.293 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 16:10:03.904 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 16:10:03.906 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 16:10:03.907 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 16:10:03.909 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 16:10:03.910 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 16:10:03.911 +00:00 [DBG] Error Url: /home/error
2021-09-02 16:10:03.911 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 16:33:51.133 +00:00 [INF] Starting host...
2021-09-02 16:33:51.220 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 16:33:51.303 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 16:33:51.306 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 16:33:51.307 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 16:33:51.307 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 16:33:51.307 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 16:33:51.308 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 16:33:51.308 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 16:33:51.928 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 16:33:51.930 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 16:33:51.931 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 16:33:51.931 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 16:33:51.931 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 16:33:51.932 +00:00 [DBG] Error Url: /home/error
2021-09-02 16:33:51.932 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 16:40:16.882 +00:00 [INF] Starting host...
2021-09-02 16:40:16.963 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-02 16:40:17.043 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-02 16:40:17.047 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-02 16:40:17.047 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-02 16:40:17.047 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-02 16:40:17.048 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-02 16:40:17.048 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-02 16:40:17.048 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-02 16:40:17.727 +00:00 [DBG] Login Url: /Account/Login
2021-09-02 16:40:17.729 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-02 16:40:17.730 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-02 16:40:17.731 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-02 16:40:17.731 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-02 16:40:17.731 +00:00 [DBG] Error Url: /home/error
2021-09-02 16:40:17.732 +00:00 [DBG] Error Id Parameter: errorId
2021-09-02 17:40:19.837 +00:00 [INF] Removing 0 grants
2021-09-02 17:40:19.853 +00:00 [INF] Removing 0 device flow codes
2021-09-03 06:21:59.593 +00:00 [INF] Removing 0 grants
2021-09-03 06:21:59.599 +00:00 [INF] Removing 0 device flow codes
2021-09-03 07:21:59.669 +00:00 [INF] Removing 0 grants
2021-09-03 07:21:59.681 +00:00 [INF] Removing 0 device flow codes
2021-09-03 07:55:50.950 +00:00 [INF] Starting host...
2021-09-03 07:55:51.111 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-03 07:55:51.244 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-03 07:55:51.250 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-03 07:55:51.252 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-03 07:55:51.253 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-03 07:55:51.254 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-03 07:55:51.254 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-03 07:55:51.255 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-03 07:55:58.583 +00:00 [DBG] Login Url: /Account/Login
2021-09-03 07:55:58.585 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-03 07:55:58.585 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-03 07:55:58.585 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-03 07:55:58.586 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-03 07:55:58.586 +00:00 [DBG] Error Url: /home/error
2021-09-03 07:55:58.586 +00:00 [DBG] Error Id Parameter: errorId
2021-09-03 07:59:27.719 +00:00 [INF] Starting host...
2021-09-03 07:59:27.870 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-03 07:59:28.014 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-03 07:59:28.020 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-03 07:59:28.021 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-03 07:59:28.021 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-03 07:59:28.021 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-03 07:59:28.021 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-03 07:59:28.022 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-03 07:59:33.837 +00:00 [DBG] Login Url: /Account/Login
2021-09-03 07:59:33.839 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-03 07:59:33.840 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-03 07:59:33.840 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-03 07:59:33.840 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-03 07:59:33.840 +00:00 [DBG] Error Url: /home/error
2021-09-03 07:59:33.840 +00:00 [DBG] Error Id Parameter: errorId
2021-09-03 08:04:33.598 +00:00 [INF] Starting host...
2021-09-03 08:04:33.736 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-03 08:04:33.856 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-03 08:04:33.860 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-03 08:04:33.861 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-03 08:04:33.861 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-03 08:04:33.861 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-03 08:04:33.862 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-03 08:04:33.862 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-03 08:04:37.364 +00:00 [DBG] Login Url: /Account/Login
2021-09-03 08:04:37.366 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-03 08:04:37.366 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-03 08:04:37.367 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-03 08:04:37.367 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-03 08:04:37.367 +00:00 [DBG] Error Url: /home/error
2021-09-03 08:04:37.367 +00:00 [DBG] Error Id Parameter: errorId
2021-09-03 08:06:16.918 +00:00 [INF] Starting host...
2021-09-03 08:06:17.073 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-03 08:06:17.208 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-03 08:06:17.212 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-03 08:06:17.212 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-03 08:06:17.213 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-03 08:06:17.213 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-03 08:06:17.213 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-03 08:06:17.213 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-03 08:06:21.221 +00:00 [DBG] Login Url: /Account/Login
2021-09-03 08:06:21.222 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-03 08:06:21.223 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-03 08:06:21.223 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-03 08:06:21.223 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-03 08:06:21.224 +00:00 [DBG] Error Url: /home/error
2021-09-03 08:06:21.224 +00:00 [DBG] Error Id Parameter: errorId
2021-09-03 09:06:07.760 +00:00 [INF] Starting host...
2021-09-03 09:06:07.917 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-03 09:06:08.054 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-03 09:06:08.058 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-03 09:06:08.059 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-03 09:06:08.059 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-03 09:06:08.059 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-03 09:06:08.059 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-03 09:06:08.060 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-03 09:06:11.626 +00:00 [DBG] Login Url: /Account/Login
2021-09-03 09:06:11.629 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-03 09:06:11.629 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-03 09:06:11.630 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-03 09:06:11.630 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-03 09:06:11.630 +00:00 [DBG] Error Url: /home/error
2021-09-03 09:06:11.630 +00:00 [DBG] Error Id Parameter: errorId
2021-09-03 09:08:39.777 +00:00 [INF] Starting host...
2021-09-03 09:08:39.934 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-03 09:08:40.072 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-03 09:08:40.076 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-03 09:08:40.076 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-03 09:08:40.077 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-03 09:08:40.077 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-03 09:08:40.077 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-03 09:08:40.078 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-03 09:08:44.553 +00:00 [DBG] Login Url: /Account/Login
2021-09-03 09:08:44.555 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-03 09:08:44.556 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-03 09:08:44.556 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-03 09:08:44.556 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-03 09:08:44.557 +00:00 [DBG] Error Url: /home/error
2021-09-03 09:08:44.557 +00:00 [DBG] Error Id Parameter: errorId
2021-09-03 09:31:29.314 +00:00 [INF] Starting host...
2021-09-03 09:31:29.647 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-03 09:31:29.787 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-03 09:31:29.791 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-03 09:31:29.792 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-03 09:31:29.792 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-03 09:31:29.792 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-03 09:31:29.793 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-03 09:31:29.793 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-03 09:32:02.076 +00:00 [INF] Starting host...
2021-09-03 09:32:02.314 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-03 09:32:02.487 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-03 09:32:02.490 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-03 09:32:02.491 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-03 09:32:02.491 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-03 09:32:02.491 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-03 09:32:02.492 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-03 09:32:02.492 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-03 09:32:21.107 +00:00 [DBG] Login Url: /Account/Login
2021-09-03 09:32:21.109 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-03 09:32:21.110 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-03 09:32:21.110 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-03 09:32:21.111 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-03 09:32:21.111 +00:00 [DBG] Error Url: /home/error
2021-09-03 09:32:21.111 +00:00 [DBG] Error Id Parameter: errorId
2021-09-06 10:10:54.617 +00:00 [INF] Starting host...
2021-09-06 10:10:55.376 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-06 10:10:55.967 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-06 10:10:55.970 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-06 10:10:55.970 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-06 10:10:55.970 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-06 10:10:55.971 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-06 10:10:55.971 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-06 10:10:55.971 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-06 10:10:58.737 +00:00 [DBG] Login Url: /Account/Login
2021-09-06 10:10:58.739 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-06 10:10:58.741 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-06 10:10:58.741 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-06 10:10:58.741 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-06 10:10:58.742 +00:00 [DBG] Error Url: /home/error
2021-09-06 10:10:58.742 +00:00 [DBG] Error Id Parameter: errorId
2021-09-06 10:11:18.298 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-06 10:14:19.105 +00:00 [WRN] User e535070a-838d-480b-bc2a-42f493cb22c8 validation failed: DuplicateUserName.
2021-09-06 10:14:30.477 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-06 10:14:36.400 +00:00 [DBG] Augmenting SignInContext
2021-09-06 10:14:36.401 +00:00 [DBG] Adding idp claim with value: local
2021-09-06 10:14:36.402 +00:00 [DBG] Adding auth_time claim with value: 1630923276
2021-09-06 10:14:36.407 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-09-06 10:14:36.418 +00:00 [INF] {"Username":"GHA-000309345-2","Provider":null,"ProviderUserId":null,"SubjectId":"e85f0cc6-1410-4b28-8377-2808684184a0","DisplayName":"GHA-000309345-2","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMBH3QF8IH96:0000001F","TimeStamp":"2021-09-06T10:14:36.0000000Z","ProcessId":23528,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-09-06 10:14:36.603 +00:00 [DBG] 1 persisted grants found for e85f0cc6-1410-4b28-8377-2808684184a0
2021-09-06 10:14:37.160 +00:00 [DBG] api-swagger found in database: true
2021-09-06 10:14:37.165 +00:00 [DBG] client configuration validation for client api-swagger succeeded.
2021-09-06 10:14:37.228 +00:00 [DBG] Found [] identity scopes in database
2021-09-06 10:14:37.343 +00:00 [DBG] Found ["ebookkeeping-api"] API scopes in database
2021-09-06 11:31:04.221 +00:00 [INF] Starting host...
2021-09-06 11:31:04.307 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-06 11:31:04.396 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-06 11:31:04.399 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-06 11:31:04.399 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-06 11:31:04.400 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-06 11:31:04.400 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-06 11:31:04.400 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-06 11:31:04.400 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-06 11:31:07.149 +00:00 [DBG] Login Url: /Account/Login
2021-09-06 11:31:07.151 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-06 11:31:07.152 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-06 11:31:07.153 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-06 11:31:07.153 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-06 11:31:07.153 +00:00 [DBG] Error Url: /home/error
2021-09-06 11:31:07.154 +00:00 [DBG] Error Id Parameter: errorId
2021-09-06 11:54:32.637 +00:00 [INF] Starting host...
2021-09-06 11:54:32.748 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-06 11:54:32.851 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-06 11:54:32.856 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-06 11:54:32.856 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-06 11:54:32.857 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-06 11:54:32.857 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-06 11:54:32.857 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-06 11:54:32.857 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-06 11:54:35.541 +00:00 [DBG] Login Url: /Account/Login
2021-09-06 11:54:35.543 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-06 11:54:35.544 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-06 11:54:35.544 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-06 11:54:35.544 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-06 11:54:35.545 +00:00 [DBG] Error Url: /home/error
2021-09-06 11:54:35.545 +00:00 [DBG] Error Id Parameter: errorId
2021-09-06 12:04:54.351 +00:00 [INF] Starting host...
2021-09-06 12:04:54.440 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-06 12:04:54.529 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-06 12:04:54.532 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-06 12:04:54.532 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-06 12:04:54.532 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-06 12:04:54.532 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-06 12:04:54.533 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-06 12:04:54.533 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-06 12:04:55.964 +00:00 [DBG] Login Url: /Account/Login
2021-09-06 12:04:55.966 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-06 12:04:55.967 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-06 12:04:55.967 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-06 12:04:55.967 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-06 12:04:55.968 +00:00 [DBG] Error Url: /home/error
2021-09-06 12:04:55.968 +00:00 [DBG] Error Id Parameter: errorId
2021-09-06 13:04:58.259 +00:00 [INF] Removing 0 grants
2021-09-06 13:04:58.276 +00:00 [INF] Removing 0 device flow codes
2021-09-06 14:04:59.238 +00:00 [INF] Removing 0 grants
2021-09-06 14:04:59.313 +00:00 [INF] Removing 0 device flow codes
2021-09-06 15:04:59.652 +00:00 [INF] Removing 0 grants
2021-09-06 15:04:59.787 +00:00 [INF] Removing 0 device flow codes
2021-09-06 16:05:00.175 +00:00 [INF] Removing 0 grants
2021-09-06 16:05:00.182 +00:00 [INF] Removing 0 device flow codes
2021-09-10 08:44:21.005 +00:00 [INF] Starting host...
2021-09-10 08:44:21.761 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 08:44:22.075 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 08:44:22.079 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 08:44:22.080 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 08:44:22.080 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 08:44:22.080 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 08:44:22.080 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 08:44:22.081 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 08:45:14.725 +00:00 [INF] Starting host...
2021-09-10 08:45:14.830 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 08:45:14.921 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 08:45:14.925 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 08:45:14.925 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 08:45:14.926 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 08:45:14.927 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 08:45:14.928 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 08:45:14.928 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 08:45:33.979 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 08:45:33.982 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 08:45:33.983 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 08:45:33.983 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 08:45:33.984 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 08:45:33.984 +00:00 [DBG] Error Url: /home/error
2021-09-10 08:45:33.984 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 08:51:43.119 +00:00 [INF] Starting host...
2021-09-10 08:51:43.212 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 08:51:43.310 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 08:51:43.314 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 08:51:43.314 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 08:51:43.315 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 08:51:43.315 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 08:51:43.315 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 08:51:43.316 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 08:51:44.773 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 08:51:44.775 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 08:51:44.776 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 08:51:44.776 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 08:51:44.776 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 08:51:44.777 +00:00 [DBG] Error Url: /home/error
2021-09-10 08:51:44.777 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 08:55:50.891 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 08:59:09.564 +00:00 [INF] Starting host...
2021-09-10 08:59:09.656 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 08:59:09.745 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 08:59:09.749 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 08:59:09.749 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 08:59:09.749 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 08:59:09.750 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 08:59:09.750 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 08:59:09.750 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 08:59:10.784 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 08:59:10.785 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 08:59:10.785 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 08:59:10.786 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 08:59:10.786 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 08:59:10.786 +00:00 [DBG] Error Url: /home/error
2021-09-10 08:59:10.786 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 08:59:23.795 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 09:03:20.320 +00:00 [INF] Starting host...
2021-09-10 09:03:20.451 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 09:03:20.543 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 09:03:20.549 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 09:03:20.549 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 09:03:20.549 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 09:03:20.550 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 09:03:20.550 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 09:03:20.550 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 09:03:23.464 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 09:03:23.465 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 09:03:23.466 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 09:03:23.466 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 09:03:23.466 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 09:03:23.466 +00:00 [DBG] Error Url: /home/error
2021-09-10 09:03:23.467 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 09:03:31.572 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 09:08:37.566 +00:00 [INF] Starting host...
2021-09-10 09:08:37.669 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 09:08:37.775 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 09:08:37.779 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 09:08:37.779 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 09:08:37.779 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 09:08:37.780 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 09:08:37.780 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 09:08:37.780 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 09:08:43.065 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 09:08:43.067 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 09:08:43.070 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 09:08:43.070 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 09:08:43.070 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 09:08:43.071 +00:00 [DBG] Error Url: /home/error
2021-09-10 09:08:43.071 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 09:09:10.442 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 09:43:51.640 +00:00 [INF] Starting host...
2021-09-10 09:43:53.281 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 09:43:54.558 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 09:43:54.588 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 09:43:54.589 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 09:43:54.589 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 09:43:54.589 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 09:43:54.589 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 09:43:54.589 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 09:47:22.328 +00:00 [INF] Starting host...
2021-09-10 09:47:22.425 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 09:47:22.523 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 09:47:22.529 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 09:47:22.529 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 09:47:22.529 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 09:47:22.530 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 09:47:22.530 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 09:47:22.530 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 09:47:27.114 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 09:47:27.116 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 09:47:27.117 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 09:47:27.117 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 09:47:27.118 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 09:47:27.118 +00:00 [DBG] Error Url: /home/error
2021-09-10 09:47:27.119 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 09:47:44.446 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 09:51:54.787 +00:00 [INF] Starting host...
2021-09-10 09:51:54.882 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 09:51:54.983 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 09:51:54.987 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 09:51:54.988 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 09:51:54.989 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 09:51:54.989 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 09:51:54.989 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 09:51:54.989 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 09:52:02.937 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 09:52:02.939 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 09:52:02.940 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 09:52:02.941 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 09:52:02.941 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 09:52:02.942 +00:00 [DBG] Error Url: /home/error
2021-09-10 09:52:02.944 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 09:52:13.772 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 09:53:19.314 +00:00 [INF] Starting host...
2021-09-10 09:53:19.412 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 09:53:19.504 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 09:53:19.507 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 09:53:19.507 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 09:53:19.508 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 09:53:19.508 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 09:53:19.508 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 09:53:19.509 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 09:53:20.998 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 09:53:21.000 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 09:53:21.001 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 09:53:21.001 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 09:53:21.001 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 09:53:21.002 +00:00 [DBG] Error Url: /home/error
2021-09-10 09:53:21.002 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 09:53:26.285 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 09:54:30.599 +00:00 [INF] Starting host...
2021-09-10 09:54:30.708 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 09:54:30.796 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 09:54:30.801 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 09:54:30.802 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 09:54:30.802 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 09:54:30.802 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 09:54:30.803 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 09:54:30.803 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 09:54:32.065 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 09:54:32.068 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 09:54:32.069 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 09:54:32.070 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 09:54:32.070 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 09:54:32.071 +00:00 [DBG] Error Url: /home/error
2021-09-10 09:54:32.071 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 09:54:36.626 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 09:56:27.864 +00:00 [INF] Starting host...
2021-09-10 09:56:27.964 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 09:56:28.056 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 09:56:28.060 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 09:56:28.060 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 09:56:28.061 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 09:56:28.061 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 09:56:28.061 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 09:56:28.062 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 09:56:31.075 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 09:56:31.077 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 09:56:31.079 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 09:56:31.079 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 09:56:31.080 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 09:56:31.080 +00:00 [DBG] Error Url: /home/error
2021-09-10 09:56:31.080 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 09:56:36.732 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 09:57:56.243 +00:00 [INF] Starting host...
2021-09-10 09:57:56.344 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 09:57:56.440 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 09:57:56.443 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 09:57:56.443 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 09:57:56.444 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 09:57:56.444 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 09:57:56.444 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 09:57:56.444 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 09:57:57.959 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 09:57:57.961 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 09:57:57.962 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 09:57:57.963 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 09:57:57.963 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 09:57:57.964 +00:00 [DBG] Error Url: /home/error
2021-09-10 09:57:57.964 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 09:58:03.514 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 10:04:18.649 +00:00 [INF] Starting host...
2021-09-10 10:04:18.760 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 10:04:18.850 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 10:04:18.854 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 10:04:18.854 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 10:04:18.855 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 10:04:18.856 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 10:04:18.856 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 10:04:18.857 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 10:04:23.235 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 10:04:23.237 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 10:04:23.238 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 10:04:23.239 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 10:04:23.239 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 10:04:23.240 +00:00 [DBG] Error Url: /home/error
2021-09-10 10:04:23.240 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 10:04:36.820 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 10:06:35.662 +00:00 [INF] Starting host...
2021-09-10 10:06:35.844 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 10:06:35.977 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 10:06:35.986 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 10:06:35.988 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 10:06:35.990 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 10:06:35.991 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 10:06:35.992 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 10:06:35.993 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 10:06:38.159 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 10:06:38.163 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 10:06:38.165 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 10:06:38.170 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 10:06:38.172 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 10:06:38.172 +00:00 [DBG] Error Url: /home/error
2021-09-10 10:06:38.173 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 10:06:41.187 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 10:10:55.031 +00:00 [INF] Starting host...
2021-09-10 10:10:55.293 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 10:10:55.385 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 10:10:55.389 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 10:10:55.389 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 10:10:55.389 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 10:10:55.390 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 10:10:55.390 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 10:10:55.390 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 10:10:57.382 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 10:10:57.384 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 10:10:57.385 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 10:10:57.385 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 10:10:57.385 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 10:10:57.386 +00:00 [DBG] Error Url: /home/error
2021-09-10 10:10:57.386 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 10:11:10.026 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 10:12:07.243 +00:00 [INF] Starting host...
2021-09-10 10:12:07.408 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 10:12:07.503 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 10:12:07.508 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 10:12:07.509 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 10:12:07.509 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 10:12:07.509 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 10:12:07.509 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 10:12:07.510 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 10:12:08.612 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 10:12:08.616 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 10:12:08.617 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 10:12:08.617 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 10:12:08.617 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 10:12:08.618 +00:00 [DBG] Error Url: /home/error
2021-09-10 10:12:08.618 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 10:12:13.532 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 10:13:40.293 +00:00 [INF] Starting host...
2021-09-10 10:13:40.394 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 10:13:40.488 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 10:13:40.492 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 10:13:40.493 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 10:13:40.493 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 10:13:40.493 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 10:13:40.494 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 10:13:40.494 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 10:13:42.061 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 10:13:42.062 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 10:13:42.064 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 10:13:42.064 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 10:13:42.065 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 10:13:42.065 +00:00 [DBG] Error Url: /home/error
2021-09-10 10:13:42.065 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 10:13:46.481 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 10:14:38.436 +00:00 [INF] Starting host...
2021-09-10 10:14:38.536 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 10:14:38.629 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 10:14:38.632 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 10:14:38.633 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 10:14:38.633 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 10:14:38.633 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 10:14:38.634 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 10:14:38.634 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 10:14:41.232 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 10:14:41.234 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 10:14:41.235 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 10:14:41.235 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 10:14:41.235 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 10:14:41.236 +00:00 [DBG] Error Url: /home/error
2021-09-10 10:14:41.239 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 10:14:45.849 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 10:16:24.545 +00:00 [INF] Starting host...
2021-09-10 10:16:24.645 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 10:16:24.744 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 10:16:24.747 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 10:16:24.748 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 10:16:24.748 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 10:16:24.748 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 10:16:24.749 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 10:16:24.749 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 10:16:26.553 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 10:16:26.554 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 10:16:26.555 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 10:16:26.556 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 10:16:26.556 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 10:16:26.556 +00:00 [DBG] Error Url: /home/error
2021-09-10 10:16:26.557 +00:00 [DBG] Error Id Parameter: errorId
2021-09-10 10:16:50.010 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 10:16:59.445 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-09-10 10:22:15.937 +00:00 [INF] Starting host...
2021-09-10 10:22:16.043 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2021-09-10 10:22:16.145 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2021-09-10 10:22:16.149 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-09-10 10:22:16.149 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-09-10 10:22:16.149 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-09-10 10:22:16.149 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-09-10 10:22:16.150 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-09-10 10:22:16.150 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-09-10 10:22:18.914 +00:00 [DBG] Login Url: /Account/Login
2021-09-10 10:22:18.918 +00:00 [DBG] Login Return Url Parameter: returnUrl
2021-09-10 10:22:18.920 +00:00 [DBG] Logout Url: /Account/Logout
2021-09-10 10:22:18.922 +00:00 [DBG] ConsentUrl Url: /consent
2021-09-10 10:22:18.923 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2021-09-10 10:22:18.924 +00:00 [DBG] Error Url: /home/error
2021-09-10 10:22:18.924 +00:00 [DBG] Error Id Parameter: errorId
2022-07-13 11:47:49.337 +00:00 [INF] Starting host...
2022-07-13 11:47:50.128 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2022-07-13 11:47:50.715 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2022-07-13 11:47:50.723 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-07-13 11:47:50.723 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-07-13 11:47:50.723 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-07-13 11:47:50.724 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-07-13 11:47:50.724 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-07-13 11:47:50.725 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-07-13 11:48:01.636 +00:00 [DBG] Login Url: /Account/Login
2022-07-13 11:48:01.639 +00:00 [DBG] Login Return Url Parameter: returnUrl
2022-07-13 11:48:01.640 +00:00 [DBG] Logout Url: /Account/Logout
2022-07-13 11:48:01.640 +00:00 [DBG] ConsentUrl Url: /consent
2022-07-13 11:48:01.640 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2022-07-13 11:48:01.640 +00:00 [DBG] Error Url: /home/error
2022-07-13 11:48:01.641 +00:00 [DBG] Error Id Parameter: errorId
2022-07-13 11:48:14.013 +00:00 [INF] AuthenticationScheme: Google was challenged.
2022-07-13 11:57:59.398 +00:00 [INF] Starting host...
2022-07-13 11:57:59.727 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2022-07-13 11:57:59.989 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2022-07-13 11:57:59.994 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-07-13 11:57:59.995 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-07-13 11:57:59.995 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-07-13 11:57:59.995 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-07-13 11:57:59.996 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-07-13 11:57:59.996 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-07-13 11:58:02.873 +00:00 [DBG] Login Url: /Account/Login
2022-07-13 11:58:02.876 +00:00 [DBG] Login Return Url Parameter: returnUrl
2022-07-13 11:58:02.876 +00:00 [DBG] Logout Url: /Account/Logout
2022-07-13 11:58:02.877 +00:00 [DBG] ConsentUrl Url: /consent
2022-07-13 11:58:02.878 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2022-07-13 11:58:02.878 +00:00 [DBG] Error Url: /home/error
2022-07-13 11:58:02.878 +00:00 [DBG] Error Id Parameter: errorId
2022-07-13 11:58:18.258 +00:00 [INF] AuthenticationScheme: Google was challenged.
2022-07-13 11:58:25.417 +00:00 [INF] AuthenticationScheme: idsrv.external signed in.
2022-07-13 11:58:25.748 +00:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at IdentityServer4.Quickstart.UI.ExternalController.Callback() in C:\Users\plawer\source\repos\KRISH\KrishBookingAppServer\PalmBooker-Auth\Quickstart\Account\ExternalController.cs:line 98
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2022-07-13 12:00:30.248 +00:00 [INF] Starting host...
2022-07-13 12:00:30.578 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2022-07-13 12:00:30.864 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2022-07-13 12:00:30.870 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-07-13 12:00:30.871 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-07-13 12:00:30.871 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-07-13 12:00:30.871 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-07-13 12:00:30.872 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-07-13 12:00:30.872 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-07-13 12:00:33.453 +00:00 [DBG] Login Url: /Account/Login
2022-07-13 12:00:33.457 +00:00 [DBG] Login Return Url Parameter: returnUrl
2022-07-13 12:00:33.458 +00:00 [DBG] Logout Url: /Account/Logout
2022-07-13 12:00:33.459 +00:00 [DBG] ConsentUrl Url: /consent
2022-07-13 12:00:33.460 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2022-07-13 12:00:33.461 +00:00 [DBG] Error Url: /home/error
2022-07-13 12:00:33.462 +00:00 [DBG] Error Id Parameter: errorId
2022-07-13 12:00:39.012 +00:00 [INF] AuthenticationScheme: Google was challenged.
2022-07-13 12:00:44.608 +00:00 [INF] AuthenticationScheme: idsrv.external signed in.
2022-07-13 12:00:44.720 +00:00 [DBG] External claims: ["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 116811895742324603759","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name: Paul Lawer","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname: Paul","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname: Lawer","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: maetzp@gmail.com"]
2022-07-13 12:00:47.740 +00:00 [DBG] Augmenting SignInContext
2022-07-13 12:00:47.742 +00:00 [DBG] Adding amr claim with value: external
2022-07-13 12:00:47.752 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-07-13 12:00:47.758 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2022-07-13 12:00:47.782 +00:00 [INF] {"Username":null,"Provider":"Google","ProviderUserId":"116811895742324603759","SubjectId":"c3a2059c-e619-4ea1-9b0a-36512bcb09d9","DisplayName":"Paul Lawer","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMJ4OT4KPKHD:00000002","TimeStamp":"2022-07-13T12:00:47.0000000Z","ProcessId":90712,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-07-13 12:06:07.121 +00:00 [INF] Starting host...
2022-07-13 12:06:07.469 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2022-07-13 12:06:07.739 +00:00 [DBG] Custom IssuerUri set to https://psl-app-vm3/EBookkeepingAuth
2022-07-13 12:06:07.746 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-07-13 12:06:07.747 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-07-13 12:06:07.747 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-07-13 12:06:07.747 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-07-13 12:06:07.748 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-07-13 12:06:07.748 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-07-13 12:06:10.623 +00:00 [DBG] Login Url: /Account/Login
2022-07-13 12:06:10.627 +00:00 [DBG] Login Return Url Parameter: returnUrl
2022-07-13 12:06:10.628 +00:00 [DBG] Logout Url: /Account/Logout
2022-07-13 12:06:10.628 +00:00 [DBG] ConsentUrl Url: /consent
2022-07-13 12:06:10.629 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2022-07-13 12:06:10.630 +00:00 [DBG] Error Url: /home/error
2022-07-13 12:06:10.630 +00:00 [DBG] Error Id Parameter: errorId
2022-07-13 12:06:19.309 +00:00 [DBG] 0 persisted grants found for c3a2059c-e619-4ea1-9b0a-36512bcb09d9
2022-07-13 12:09:59.325 +00:00 [INF] Starting host...
2022-07-13 12:09:59.614 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2022-07-13 12:09:59.801 +00:00 [DBG] Custom IssuerUri set to https://localhost:5001
2022-07-13 12:09:59.806 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-07-13 12:09:59.806 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-07-13 12:09:59.807 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-07-13 12:09:59.807 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-07-13 12:09:59.807 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-07-13 12:09:59.808 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-07-13 12:10:03.364 +00:00 [DBG] Login Url: /Account/Login
2022-07-13 12:10:03.368 +00:00 [DBG] Login Return Url Parameter: returnUrl
2022-07-13 12:10:03.369 +00:00 [DBG] Logout Url: /Account/Logout
2022-07-13 12:10:03.370 +00:00 [DBG] ConsentUrl Url: /consent
2022-07-13 12:10:03.370 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2022-07-13 12:10:03.370 +00:00 [DBG] Error Url: /home/error
2022-07-13 12:10:03.371 +00:00 [DBG] Error Id Parameter: errorId
2022-07-13 12:49:35.895 +00:00 [INF] Starting host...
2022-07-13 12:49:36.737 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2022-07-13 12:49:37.239 +00:00 [DBG] Custom IssuerUri set to https://localhost:5001
2022-07-13 12:49:37.245 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-07-13 12:49:37.245 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-07-13 12:49:37.246 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-07-13 12:49:37.246 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-07-13 12:49:37.247 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-07-13 12:49:37.248 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-07-13 12:49:41.173 +00:00 [DBG] Login Url: /Account/Login
2022-07-13 12:49:41.176 +00:00 [DBG] Login Return Url Parameter: returnUrl
2022-07-13 12:49:41.176 +00:00 [DBG] Logout Url: /Account/Logout
2022-07-13 12:49:41.177 +00:00 [DBG] ConsentUrl Url: /consent
2022-07-13 12:49:41.177 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2022-07-13 12:49:41.177 +00:00 [DBG] Error Url: /home/error
2022-07-13 12:49:41.178 +00:00 [DBG] Error Id Parameter: errorId
2022-07-13 12:49:44.504 +00:00 [INF] AuthenticationScheme: Identity.Application signed out.
2022-07-13 12:49:44.511 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2022-07-13 12:49:44.513 +00:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2022-07-13 12:49:44.524 +00:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2022-07-13 12:49:44.538 +00:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2022-07-13 12:50:01.127 +00:00 [INF] AuthenticationScheme: Google was challenged.
2022-07-13 12:50:08.293 +00:00 [INF] AuthenticationScheme: idsrv.external signed in.
2022-07-13 12:50:08.403 +00:00 [DBG] External claims: ["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 116811895742324603759","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name: Paul Lawer","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname: Paul","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname: Lawer","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: maetzp@gmail.com"]
2022-07-13 12:51:07.831 +00:00 [DBG] Augmenting SignInContext
2022-07-13 12:51:07.832 +00:00 [DBG] Adding amr claim with value: external
2022-07-13 12:51:07.836 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-07-13 12:51:07.838 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2022-07-13 12:51:07.858 +00:00 [INF] {"Username":null,"Provider":"Google","ProviderUserId":"116811895742324603759","SubjectId":"29fcf933-5c6e-4baf-bf62-d364ca8b1dc2","DisplayName":"Paul Lawer","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMJ4POJ31INF:00000002","TimeStamp":"2022-07-13T12:51:07.0000000Z","ProcessId":108372,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-07-13 15:12:28.101 +00:00 [INF] Starting host...
2022-07-13 15:12:28.561 +00:00 [INF] Starting IdentityServer4 version 3.1.3.0
2022-07-13 15:12:28.731 +00:00 [DBG] Custom IssuerUri set to https://localhost:5001
2022-07-13 15:12:28.733 +00:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-07-13 15:12:28.734 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-07-13 15:12:28.734 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-07-13 15:12:28.734 +00:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-07-13 15:12:28.734 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-07-13 15:12:28.735 +00:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-07-13 15:12:38.423 +00:00 [DBG] Login Url: /Account/Login
2022-07-13 15:12:38.424 +00:00 [DBG] Login Return Url Parameter: returnUrl
2022-07-13 15:12:38.424 +00:00 [DBG] Logout Url: /Account/Logout
2022-07-13 15:12:38.424 +00:00 [DBG] ConsentUrl Url: /consent
2022-07-13 15:12:38.425 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2022-07-13 15:12:38.425 +00:00 [DBG] Error Url: /home/error
2022-07-13 15:12:38.425 +00:00 [DBG] Error Id Parameter: errorId
2022-07-13 15:13:13.008 +00:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2022-07-13 15:13:13.154 +00:00 [INF] AuthenticationScheme: Google was challenged.
2022-07-13 15:13:20.296 +00:00 [INF] AuthenticationScheme: idsrv.external signed in.
2022-07-13 15:13:20.347 +00:00 [DBG] External claims: ["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 113881248129794621274","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name: Krishika Mirpuri","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname: Krishika","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname: Mirpuri","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: mirpurikrishika10@gmail.com"]
2022-07-13 15:13:21.737 +00:00 [DBG] Augmenting SignInContext
2022-07-13 15:13:21.738 +00:00 [DBG] Adding amr claim with value: external
2022-07-13 15:13:21.741 +00:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-07-13 15:13:21.743 +00:00 [INF] AuthenticationScheme: Identity.External signed out.
2022-07-13 15:13:21.752 +00:00 [INF] {"Username":null,"Provider":"Google","ProviderUserId":"113881248129794621274","SubjectId":"7568e72a-809a-42ff-9502-53c07eb33864","DisplayName":"Krishika Mirpuri","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMJ4S8DCJB1R:00000008","TimeStamp":"2022-07-13T15:13:21.0000000Z","ProcessId":4528,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-07-13 15:13:21.833 +00:00 [DBG] 0 persisted grants found for 7568e72a-809a-42ff-9502-53c07eb33864
